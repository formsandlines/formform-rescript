!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.formform=n():r.formform=n()}(this,(function(){return function(){"use strict";var r={d:function(n,t){for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},o:function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},r:function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},n={};r.d(n,{default:function(){return _t}});var t={};r.r(t),r.d(t,{Const:function(){return B},Nested:function(){return W}});var e={};r.r(e),r.d(e,{Perspective:function(){return Kr},fromIntArr:function(){return Fr},fromIntArrUnsafe:function(){return xr},fromStrArr:function(){return jr},fromStrArrUnsafe:function(){return Ur},genRandom:function(){return Vr},get:function(){return kr},getLength:function(){return Pr},getSize:function(){return Dr},getUnsafe:function(){return Mr},inv:function(){return Jr},isValidLength:function(){return br},make:function(){return Sr},makeUnsafe:function(){return Or},raw:function(){return Br},rel:function(){return zr},reorderToNMUI:function(){return Xr},show:function(){return qr},toArray:function(){return Lr}});var u={};r.r(u),r.d(u,{calcRE:function(){return nn},getUType:function(){return rn},mnFromStr:function(){return Qr},recIdent:function(){return en},recInstr:function(){return tn},showMN:function(){return Yr},showSig:function(){return Wr},showUType:function(){return Zr},sigFromJs:function(){return $r},sigToJs:function(){return Hr}});var i={};r.r(i),r.d(i,{DepthTree:function(){return gn},FORM:function(){return wn},FormDNA:function(){return Tn},Sequence:function(){return pn},idxClass_unquoted:function(){return fn},lblClass_unquoted:function(){return an}});var o={};r.r(o),r.d(o,{Lexer:function(){return Xn},Parser:function(){return Fn},Token:function(){return Nn},read:function(){return Ln}});var a={};r.r(a),r.d(a,{VDict:function(){return Qn},VMap:function(){return $n},VPoint:function(){return Kn},VSpace:function(){return zn}});var f={};r.r(f),r.d(f,{Isolator:function(){return tt},Pattern:function(){return et},PrimAlg:function(){return ut}});var c={};function l(r,n,t){for(var e=new Array(t),u=0,i=n;u<t;)e[u]=r[i],u=u+1|0,i=i+1|0;return e}function s(r,n){if(n<0||n>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[n]}function d(r,n){for(;;){var t=n,e=r,u=e.length,i=0===u?1:u,o=i-t.length|0;if(0===o)return e.apply(null,t);if(o>=0)return function(r,n){return function(t){return d(r,n.concat([t]))}}(e,t);n=l(t,i,0|-o),r=e.apply(null,l(t,0,i))}}function v(r,n){var t=r.length;if(1===t)return r(n);switch(t){case 1:return r(n);case 2:return function(t){return r(n,t)};case 3:return function(t,e){return r(n,t,e)};case 4:return function(t,e,u){return r(n,t,e,u)};case 5:return function(t,e,u,i){return r(n,t,e,u,i)};case 6:return function(t,e,u,i,o){return r(n,t,e,u,i,o)};case 7:return function(t,e,u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n])}}function h(r){return 1===r.length?r:function(n){return v(r,n)}}function _(r,n,t){var e=r.length;if(2===e)return r(n,t);switch(e){case 1:return d(r(n),[t]);case 2:return r(n,t);case 3:return function(e){return r(n,t,e)};case 4:return function(e,u){return r(n,t,e,u)};case 5:return function(e,u,i){return r(n,t,e,u,i)};case 6:return function(e,u,i,o){return r(n,t,e,u,i,o)};case 7:return function(e,u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n,t])}}function E(r){return 2===r.length?r:function(n,t){return _(r,n,t)}}function A(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function m(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var n=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===n?void 0:{BS_PRIVATE_NESTED_SOME_NONE:n-1|0}}function T(r){return function(r,n){for(;;){var t=n,e=r;if(!e)return t;n={hd:e.hd,tl:t},r=e.tl}}(r,0)}function p(r,n){return r<n?-1:r===n?0:1}function w(r,n){return r===n?0:r<n?-1:1}function g(r,n){if(n>=0&&n<r.length)return A(r[n])}function G(r,n){if(r<=0)return[];for(var t=new Array(r),e=0;e<r;++e)t[e]=n(e);return t}function N(r,n){return G(r,h(n))}function y(r,n,t){return function(r,n,t){for(var e=r.length,u=n.length,i=e<u?e:u,o=new Array(i),a=0;a<i;++a)o[a]=t(r[a],n[a]);return o}(r,n,E(t))}function R(r,n){for(var t=r.length,e=n.length,u=new Array(t+e|0),i=0;i<t;++i)u[i]=r[i];for(var o=0;o<e;++o)u[t+o|0]=n[o];return u}function I(r,n){return function(r,n){for(var t=r.length,e=new Array(t),u=0;u<t;++u)e[u]=n(r[u]);return e}(r,h(n))}function k(r,n){return function(r,n){for(var t=r.length,e=new Array(t),u=0;u<t;++u)e[u]=n(u,r[u]);return e}(r,E(n))}function M(r,n,t){return function(r,n,t){for(var e=n,u=0,i=r.length;u<i;++u)e=t(e,r[u]);return e}(r,n,E(t))}function P(r,n){for(;;){var t=n,e=r;if(!e)return t;var u={hd:e.hd,tl:0};t.tl=u,n=u,r=e.tl}}function D(r,n){return function(r,n){if(!r)return 0;var t={hd:n(r.hd),tl:0};return function(r,n,t){for(;;){var e=n,u=r;if(!u)return;var i={hd:t(u.hd),tl:0};e.tl=i,n=i,r=u.tl}}(r.tl,t,n),t}(r,h(n))}function b(r){for(var n=r,t=0;;){if(!n)return t;t=t+1|0,n=n.tl}}function S(r){for(var n=r.length-1|0,t=0;;){var e=t,u=n;if(u<0)return e;t={hd:r[u],tl:e},n=u-1|0}}function O(r){var n=b(r),t=new Array(n);return function(r,n,t){for(;;){var e=t,u=n;if(!e)return;r[u]=e.hd,t=e.tl,n=u+1|0}}(t,0,r),t}function V(r,n,t){return function(r,n,t){for(;;){var e=r;if(!e)return n;n=t(n,e.hd),r=e.tl}}(r,n,E(t))}function L(r,n,t){return r?t(L(r.tl,n,t),r.hd):n}function X(r,n,t){return b(r)<1e3?L(r,n,t):function(r,n,t){for(var e=n,u=r.length-1|0;u>=0;--u)e=t(e,r[u]);return e}(O(r),n,t)}function F(r,n){return function(r,n){for(;;){var t=r;if(!t)return!1;if(n(t.hd))return!0;r=t.tl}}(r,h(n))}function x(r){if(r<=3&&0<=r)return r-0|0}function j(r){switch(r){case 0:return"N";case 1:return"U";case 2:return"I";case 3:return"M"}}function U(r){switch(r){case 0:return 3;case 1:return 2;case 2:return 1;case 3:return 0}}function q(r,n){if(0===n)return r;switch(r){case 0:return n;case 1:return n>=2?3:1;case 2:return 2!==n?3:2;case 3:return 3}}r.r(c),r.d(c,{$$eval:function(){return ht},Interpr:function(){return vt},evalAll:function(){return dt},evalSeq:function(){return lt},interEval:function(){return st}});var B={tToJs:function(r){return r+0|0},tFromJs:x,tEnum:function(r,n){return void 0!==r&&r?[0,3,1,2]:[0,1,2,3]},tEnumList:function(r,n){return void 0!==r&&r?{hd:0,tl:{hd:3,tl:{hd:1,tl:{hd:2,tl:0}}}}:{hd:0,tl:{hd:1,tl:{hd:2,tl:{hd:3,tl:0}}}}},show:j,showAsKey:function(r){switch(r){case 0:return"N";case 1:return"U";case 2:return"I";case 3:return"M"}},toInt:function(r,n){var t=void 0!==r&&r,e=n+0|0;switch(e){case 0:return e;case 1:return t?2:e;case 2:return t?3:e;case 3:return t?1:e;default:return-99}},fromInt:function(r,n){var t=void 0!==r&&r,e=x(n);if(!t)return e;if(void 0===e)return e;switch(e){case 0:return e;case 1:return 3;case 2:return 1;case 3:return 2}},tFromStr:function(r,n){var t=void 0!==r&&r;switch(n){case"1":return t?3:1;case"2":return t?1:2;case"3":return t?2:3;case"(mn)":case"I":case"i":return 2;case"()":case"M":case"m":return 3;case"":case"(())":case".":case"0":case"N":case"n":return 0;case"U":case"mn":case"u":return 1;default:return}},inv:U,rel:q};function C(r){for(;;){var n=r;if(!n)return n;var t=n.hd;if(0===t){var e=n.tl;if(e&&0===e.hd){r=e.tl;continue}}return{hd:t,tl:C(n.tl)}}}function K(r){return{NAME:"NestToL",VAL:C(r.VAL)}}function J(r){return{NAME:"NestToR",VAL:C(r.VAL)}}function z(r,n){if(!r)return r;var t=r.tl,e=r.hd;return t?0!==e?e>=3?{hd:3,tl:0}:void 0!==n?n===e?{hd:0,tl:z(t,n)}:{hd:3,tl:0}:{hd:e,tl:z(t,e)}:{hd:0,tl:z(t,n)}:2!==e&&1!==e||void 0===n?r:n===e?{hd:0,tl:0}:{hd:3,tl:0}}function H(r){return{NAME:"NestToL",VAL:T(z(T(r.VAL),void 0))}}function $(r){return{NAME:"NestToR",VAL:z(r.VAL,void 0)}}function Q(r){if(!r)return 0;var n=r.tl,t=r.hd;return n?0!==t?t>=3?3:q(t,U(Q(n))):U(Q(n)):t}var W={show:function(r){if("NestToR"===r.NAME){var n=r.VAL;return n?"("+X(n,"",E((function(r,n){return j(n)+(r.length>0?"("+r+")":"")})))+")":"M"}var t=r.VAL;return t?"("+V(t,"",(function(r,n){return(r.length>0?"("+r+")":"")+j(n)}))+")":"M"},getList:function(r){return r.VAL},fromArrayToL:function(r){return{NAME:"NestToL",VAL:S(r)}},fromArrayToR:function(r){return{NAME:"NestToR",VAL:S(r)}},toArray:function(r){return O(r.VAL)},fmapL:function(r,n){return{NAME:"NestToL",VAL:v(n,r.VAL)}},fmapR:function(r,n){return{NAME:"NestToR",VAL:v(n,r.VAL)}},reduceByCrossingL:K,reduceByCrossingR:J,reduceByCallingL:H,reduceByCallingR:$,reduceL:function(r){return K(H({NAME:"NestToL",VAL:r.VAL}))},reduceR:function(r){return J($({NAME:"NestToR",VAL:r.VAL}))},calcL:function(r){var n=r.VAL;return n?U(Q(T(n))):3},calcR:function(r){var n=r.VAL;return n?U(Q(n)):3}},Y=function(r,n){for(var t in r)n(t)};function Z(r,n){if(r===n)return 0;var t,e=typeof r,u=typeof n;switch(e){case"boolean":if("boolean"===u)return t=n,r?t?0:1:t?-1:0;break;case"function":if("function"===u)throw{RE_EXN_ID:"Invalid_argument",_1:"compare: functional value",Error:new Error};break;case"number":if("number"===u)return p(r,n);break;case"string":return"string"===u?w(r,n):1;case"undefined":return-1}switch(u){case"string":return-1;case"undefined":return 1;default:if("boolean"===e)return 1;if("boolean"===u)return-1;if("function"===e)return 1;if("function"===u)return-1;if("number"===e)return null===n||void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if("number"===u)return null===r||void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(null===r)return void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if(null===n)return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(void 0!==r.BS_PRIVATE_NESTED_SOME_NONE)return void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?rr(r,n):-1;var i=0|r.TAG,o=0|n.TAG;if(248===i)return p(r[1],n[1]);if(251===i)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(i!==o)return i<o?-1:1;var a=0|r.length,f=0|n.length;if(a===f){if(!Array.isArray(r))return r instanceof Date&&n instanceof Date?r-n:rr(r,n);for(var c=0;;){var l=c;if(l===a)return 0;var s=Z(r[l],n[l]);if(0!==s)return s;c=l+1|0}}else if(a<f)for(var d=0;;){var v=d;if(v===a)return-1;var h=Z(r[v],n[v]);if(0!==h)return h;d=v+1|0}else for(var _=0;;){var E=_;if(E===f)return 1;var A=Z(r[E],n[E]);if(0!==A)return A;_=E+1|0}}}function rr(r,n){var t={contents:void 0},e={contents:void 0},u=function(r,n){var t=r[2],e=r[1];if(!e.hasOwnProperty(n)||Z(r[0][n],e[n])>0){var u=t.contents;return void 0!==u&&n>=u?void 0:void(t.contents=n)}},i=[r,n,e],o=[n,r,t];Y(r,(function(r){return u(i,r)})),Y(n,(function(r){return u(o,r)}));var a=t.contents,f=e.contents;return void 0!==a?void 0!==f?w(a,f):-1:void 0!==f?1:0}function nr(r,n){if(r===n)return!0;var t=typeof r;if("string"===t||"number"===t||"boolean"===t||"undefined"===t||null===r)return!1;var e=typeof n;if("function"===t||"function"===e)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if("number"===e||"undefined"===e||null===n)return!1;var u=0|r.TAG,i=0|n.TAG;if(248===u)return r[1]===n[1];if(251===u)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(u!==i)return!1;var o=0|r.length;if(o!==(0|n.length))return!1;if(!Array.isArray(r)){if(r instanceof Date&&n instanceof Date)return!(r>n||r<n);var a={contents:!0};return Y(r,(function(r){n.hasOwnProperty(r)||(a.contents=!1)})),a.contents&&Y(n,(function(t){r.hasOwnProperty(t)&&nr(n[t],r[t])||(a.contents=!1)})),a.contents}for(var f=0;;){var c=f;if(c===o)return!0;if(!nr(r[c],n[c]))return!1;f=c+1|0}}function tr(r,n,t){var e=void 0!==r?r.h:0,u=void 0!==t?t.h:0;return{v:n,h:(e>=u?e:u)+1|0,l:r,r:t}}function er(r){return{v:r,h:1,l:void 0,r:void 0}}function ur(r,n){return void 0===n||void 0!==r&&r.h>=n.h}function ir(r,n,t){var e=void 0!==r?r.h:0,u=void 0!==t?t.h:0;if(e>(u+2|0)){var i=r.l,o=r.r;return ur(i,o)?tr(i,r.v,tr(o,n,t)):tr(tr(i,r.v,o.l),o.v,tr(o.r,n,t))}if(u<=(e+2|0))return{v:n,h:(e>=u?e:u)+1|0,l:r,r:t};var a=t.l,f=t.r;return ur(f,a)?tr(tr(r,n,a),t.v,f):tr(tr(r,n,a.l),a.v,tr(a.r,t.v,f))}function or(r){var n=r.l,t=r.r;return(1+(void 0!==n?or(n):0)|0)+(void 0!==t?or(t):0)|0}function ar(r,n,t){for(;;){var e=n,u=r,i=u.v,o=u.l,a=u.r,f=void 0!==o?ar(o,e,t):e;t[f]=i;var c=f+1|0;if(void 0===a)return c;n=c,r=a}}function fr(r){if(void 0===r)return[];var n=or(r),t=new Array(n);return ar(r,0,t),t}function cr(r,n,t){switch(t){case 0:return;case 1:return er(r[n]);case 2:var e=r[n];return{v:r[n-1|0],h:2,l:er(e),r:void 0};case 3:var u=r[n],i=r[n-1|0],o=r[n-2|0];return{v:i,h:2,l:er(u),r:er(o)};default:var a=t/2|0;return tr(cr(r,n,a),r[n-a|0],cr(r,(n-a|0)-1|0,(t-a|0)-1|0))}}function lr(r,n,t){switch(t){case 0:return;case 1:return er(r[n]);case 2:var e=r[n];return{v:r[n+1|0],h:2,l:er(e),r:void 0};case 3:var u=r[n],i=r[n+1|0],o=r[n+2|0];return{v:i,h:2,l:er(u),r:er(o)};default:var a=t/2|0;return tr(lr(r,n,a),r[n+a|0],lr(r,1+(n+a|0)|0,(t-a|0)-1|0))}}function sr(r){var n=r.l;r.l=n.r,n.r=r;var t=r.l,e=void 0!==t?t.h:0,u=r.r,i=void 0!==u?u.h:0;r.h=(e>i?e:i)+1|0;var o=n.l,a=void 0!==o?o.h:0,f=r.h;return n.h=(a>f?a:f)+1|0,n}function dr(r){var n=r.r;r.r=n.l,n.l=r;var t=r.l,e=void 0!==t?t.h:0,u=r.r,i=void 0!==u?u.h:0;r.h=(e>i?e:i)+1|0;var o=n.r,a=void 0!==o?o.h:0,f=r.h;return n.h=(a>f?a:f)+1|0,n}function vr(r){var n=r.l,t=void 0!==n?n.h:0,e=r.r,u=void 0!==e?e.h:0;return r.h=(t>u?t:u)+1|0,r}function hr(r,n){if(void 0===r)return er(n);var t=r.v;if(n===t)return r;var e=r.l,u=r.r;return n<t?r.l=hr(e,n):r.r=hr(u,n),function(r){var n,t,e=r.l,u=r.r,i=void 0!==e?e.h:0,o=void 0!==u?u.h:0;if(i>(2+o|0))return ur(e.l,e.r)?vr(sr(r)):vr((t=dr((n=r).l),n.l=t,sr(n)));if(o>(2+i|0)){var a=u.l;return ur(u.r,a)?vr(dr(r)):vr(function(r){var n=sr(r.r);return r.r=n,dr(r)}(r))}return r.h=(i>o?i:o)+1|0,r}(r)}var _r=function(r){var n=r.length;if(0!==n){var t,e=function(r){var n=r.length;if(0===n||1===n)return n;var t=r[0],e=r[1];if(!(t<e))return t>e?0|-function(r,n,t,e){for(;;){var u=t,i=n;if(u>=e)return u;var o=r[u];if(i<=o)return u;t=u+1|0,n=o}}(r,e,2,n):1;for(var u=e,i=2;;){var o=i,a=u;if(o>=n)return o;var f=r[o];if(a>=f)return o;i=o+1|0,u=f}}(r);t=e>=0?lr(r,0,e):cr(r,(e=0|-e)-1|0,e);for(var u=e;u<n;++u)t=hr(t,r[u]);return t}},Er=fr,Ar=(r,n,t)=>r.padStart(n,t);function mr(r){var n=parseInt(r,10);return isNaN(n)?void 0:n}var Tr={contents:0};function pr(r){return Tr.contents=Tr.contents+1|0,r+"/"+Tr.contents}var wr=pr("Helper-Formform.IndexExc"),gr=pr("Helper-Formform.Debug");function Gr(r,n){return r?{hd:n,tl:{hd:r.hd,tl:Gr(r.tl,n)}}:0}function Nr(r,n){return r?{hd:r.hd,tl:Gr(r.tl,n)}:0}function yr(r){return r?r.hd+yr(r.tl):""}var Rr=function(r,n){return yr(Nr(r,n))},Ir="abcdefghijklmnopqrstuvwxyz".split(""),kr=g;function Mr(r,n){return r[n]}function Pr(r){return r.length}function Dr(r){var n=r.length;return Math.log(n)/Math.log(4)|0}function br(r){return void 0!==function(r){var n=Math.log(r)/Math.log(4);return!Number.isFinite(n)||function(r){return(0|r)<r}(n)?void 0:0|n}(r)}function Sr(r){if(br(r.length))return r}function Or(r){if(br(r.length))return r;throw{RE_EXN_ID:"Not_found",Error:new Error}}function Vr(r){return[]}function Lr(r){return r}function Xr(r,n){var t=void 0!==r&&r,e=n.length;if(e<4)return n;var u=e/4|0;return function(r){for(var n=r.length,t=0,e=0;e<n;++e)t=t+r[e].length|0;var u=new Array(t);t=0;for(var i=0;i<n;++i)for(var o=r[i],a=0,f=o.length;a<f;++a)u[t]=o[a],t=t+1|0;return u}(N(4,(function(r){var i;switch(r){case 0:i=t?2:1;break;case 1:i=t?0:2;break;case 2:i=t?1:0;break;default:i=r}var o=Math.imul(i,u),a=n.slice(o,o+u|0);return e>4?Xr(t,a):a})))}function Fr(r,n){var t=void 0!==r&&r;if(!1!==br(n.length)){var e=n.map((function(r){var n=B.fromInt(t,r);if(void 0!==n)return n;throw{RE_EXN_ID:"Not_found",Error:new Error}}));return t?Xr(!0,e):e}}function xr(r,n){var t=Fr(void 0!==r&&r,n);if(void 0!==t)return t;throw{RE_EXN_ID:"Not_found",Error:new Error}}function jr(r,n){var t=void 0!==r&&r;if(!1!==br(n.length)){var e=n.map((function(r){var n=B.tFromStr(t,r);if(void 0!==n)return n;throw{RE_EXN_ID:"Not_found",Error:new Error}}));return t?Xr(!0,e):e}}function Ur(r,n){var t=jr(void 0!==r&&r,n);if(void 0!==t)return t;throw{RE_EXN_ID:"Not_found",Error:new Error}}function qr(r,n,t){var e=void 0!==r&&r,u=void 0!==n&&n,i=e?Xr(void 0,t):t,o=(e?"::":"⁘")+(u?" ":"");return nr(i,[])?o+B.toInt(e,0).toString():o+i.reduce((function(r,n,t){return r+(u&&t>0&&t%4==0?" ":"")+B.toInt(e,n).toString()}),"")}function Br(r){return nr(r,[])?B.showAsKey(0):r.map((function(r){return B.showAsKey(r)})).join("")}function Cr(r){var n=r.length;if(1!==n){if(0===n)return!0}else if(0===r[0])return!0;var t=Er(_r(r)),e=t.length;return r.length===e&&0===s(t,0)&&s(t,e-1|0)===(e-1|0)}var Kr={getPermOrder:function(r){return r.permOrder},getDna:function(r){return r.dna},isValidPermOrder:Cr,permute:function(r,n){var t=Dr(r);if(t===n.length&&Cr(n)){if(t<2)return{permOrder:n,dna:r};var e=Or(G(r.length,(function(e){var u=function(r){return Ar(r.toString(4),t,"0")}(e).split(""),i=G(t,(function(r){var t=g(n,r);if(void 0!==t){var e=g(u,t);if(void 0!==e)return e;throw{RE_EXN_ID:wr,_1:["Couldn't get qtn string from swapped index",t],Error:new Error}}throw{RE_EXN_ID:wr,_1:["Couldn't get index from permutation ordering!",r],Error:new Error}})).join(""),o=(4,i.split("").reverse().reduce((function(r,n,t){return e=function(r){return function(r,n){if(void 0!==r)return A(n(m(r)))}(mr(n),h((function(n){return r+Math.imul(n,0|Math.pow(4,t))|0})))},function(r,n){if(void 0!==r)return n(m(r))}(r,h(e));var e}),0));if(void 0!==o){var a=g(r,o);if(void 0!==a)return a;throw{RE_EXN_ID:wr,_1:["Couldn't get Const value from DNA.",o],Error:new Error}}throw{RE_EXN_ID:gr,_1:'permKey "'+i+'" could not be converted to int!',Error:new Error}})));return{permOrder:n,dna:e}}},permuteAll:function(r){return[{permOrder:[],dna:r}]},makeUnsafe:function(r,n){return{permOrder:r,dna:n}}};function Jr(r){return nr(r,[])?[B.inv(0)]:r.map((function(r){return B.inv(r)}))}function zr(r,n){var t=r.length,e=n.length,u=t<=e?[r,n,t,e]:[n,r,e,t],i=u[3],o=u[2],a=u[1],f=y(a,u[0],(function(r,n){return B.rel(r,n)}));return o===i?f:R(f,function(r,n,t){if(t<=0)return[];var e,u=r.length,i=n<0?(e=u+n|0)>0?e:0:n,o=u-i|0,a=o<t?o:t;if(a<=0)return[];for(var f=new Array(a),c=0;c<a;++c)f[c]=r[i+c|0];return f}(a,o,i))}function Hr(r){return{reEntryPar:r.reEntryPar,unmarked:r.unmarked,interpr:r.interpr}}function $r(r){return{reEntryPar:r.reEntryPar,unmarked:r.unmarked,interpr:r.interpr}}function Qr(r){switch(r){case"RecIdent":case"Recursive Identity":case"id":case"rId":case"recIdent":return 1;case"RecInstr":case"Recursive Instruction":case"in":case"rIn":case"recInstr":return 0;default:throw{RE_EXN_ID:"Not_found",Error:new Error}}}function Wr(r){var n;switch(r.reEntryPar){case 0:n=["..",""];break;case 1:n=["..","."];break;case 2:n=["",""]}var t=r.interpr?"@~":"@";return n[0]+t+n[1]+(r.unmarked?"_":"")}function Yr(r){return r?"recursive identity":"recursive instruction"}function Zr(r){return r?"iFORM":"uFORM"}function rn(r,n){switch(n){case 0:return r.unmarked?1:0;case 1:switch(r.reEntryPar){case 0:return 0;case 1:case 2:return 1}case 2:return 1}}function nn(r,n){var t=n.VAL,e=r.interpr,u=r.unmarked,i=r.reEntryPar,o=0===t||function(r){for(var n=0,t=r;;){var e=n;if(!t)return e;t=t.tl,n=e+1|0}}(t)%2!=0?1:0,a=rn({reEntryPar:i,unmarked:u,interpr:e},o);if(0===t||function(r,n){for(;;){var t=r;if(!t)return!0;if(!n(t.hd))return!1;r=t.tl}}(t,h((function(r){return 0===r}))))return a?2:1;var f=u||1!==o||0!==i?t:function(r,n){if(!r)return n;var t={hd:r.hd,tl:0};return P(r.tl,t).tl=n,t}(t,t);if(F(f,(function(r){return 3===r}))||F(f,(function(r){return 1===r}))&&F(f,(function(r){return 2===r}))){var c=W.calcR(W.reduceR({NAME:"NestToR",VAL:f}));return u?B.inv(c):c}var l=W.reduceR({NAME:"NestToR",VAL:f}).VAL,s=function(r){if(r)return A(r.hd)}(l);if(1===e&&!u&&nr(s,0)){if(l){var d=l.tl;if(d){var v=d.hd;return a?B.rel(2,v):B.rel(1,v)}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",144,58],Error:new Error}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",144,58],Error:new Error}}if(1===e&&u&&!nr(s,0)){if(void 0!==s)return a?B.rel(2,s):B.rel(1,s);throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",163,58],Error:new Error}}if(u){if(l){var _=l.hd;if(0!==_){if(_<3){var E=l.tl;if(!E)return 0===i?2:1;if(0===E.hd&&!E.tl)return 1}}else{var m=l.tl;if(m&&m.hd-1>>>0<=1){var T=m.tl;if(!T)return 2;if(0===T.hd&&!T.tl)return 0===i?1:2}}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",198,60],Error:new Error}}if(l){var p=l.hd;if(0!==p){if(p<3){var w=l.tl;if(!w)return 0===i?1:2;if(0===w.hd&&!w.tl)return 1}}else{var g=l.tl;if(g&&g.hd-1>>>0<=1){var G=g.tl;if(!G)return 2;if(0===G.hd&&!G.tl)return 0===i?2:1}}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",189,60],Error:new Error}}var tn=0,en=1;function un(r,n,t){if(void 0===r)return er(n);var e=r.v,u=t(n,e);if(0===u)return r;var i=r.l,o=r.r;if(u<0){var a=un(i,n,t);return a===i?r:ir(a,e,o)}var f=un(o,n,t);return f===o?r:ir(i,e,f)}var on=fr,an=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω"],fn=R(["0","1","2","3","4","5","6","7","8","9"],an);function cn(r,n){var t,e,u=void 0!==r&&r;switch(0|n.TAG){case 0:return"("+ln(u,n._0)+")";case 1:return B.show(n._0);case 2:return"{"+Wr(n._0)+" "+sn(u,n._1)+"}";case 3:return"/"+n._0+"/";case 4:var i=n._0;return(3===(e=(t=i).length)&&"_"===t[1]?an.includes(t[0])&&fn.includes(t[2]):1===e&&an.includes(t[0]))?i:'"'+i+'"';case 5:return"["+dn(u,n._0)+"]"}}function ln(r,n){var t=void 0!==r&&r;return n.map((function(r){return cn(t,r)})).join("")}function sn(r,n){var t=void 0!==r&&r;return Rr(D(function(r,n){for(;;){var t=n,e=r;if(!e)return t;n={hd:e.hd,tl:t},r=e.tl}}(n,0),(function(r){return ln(t,r)})),",")}function dn(r,n){var t,e=n.vars,u=n.form,i=void 0!==r&&r;if(void 0!==u)if(void 0!==e){var o=e.join(",");t=ln(i,u)+".["+o+"]"}else t=ln(i,u);else t="";return t+qr(i,void 0,n.dna)}function vn(r,n,t){return M(t,n,(function(n,t){var e=_(r,n,t);switch(0|t.TAG){case 0:return vn(r,e,t._0);case 2:return V(t._1,e,(function(n,t){return vn(r,n,t)}));default:return e}}))}function hn(r){switch(0|r.TAG){case 0:return{TAG:0,_0:r._0.map(hn)};case 1:return{TAG:1,_0:r._0};case 2:return{TAG:2,_0:r._0,_1:D(r._1,(function(r){return r.map(hn)}))};case 3:return{TAG:3,_0:r._0};case 5:return{TAG:5,_0:_n(r._0)}}}function _n(r){var n=r.form,t=void 0!==n?n.map(hn):void 0;return{dna:r.dna,form:t,vars:r.vars}}function En(r,n,t){return M(t,n,(function(n,t){var e=_(r,n,t);switch(0|t.TAG){case 0:return En(r,e,t._0);case 2:return V(t._1,e,(function(n,t){return En(r,n,t)}));default:return e}}))}function An(r){return 0===r.TAG?"{ index: "+r.index.join("")+", form: '"+cn(void 0,r.form)+"', children: ["+r.children.map(An).join(", ")+"] }":"{ index: "+r.index.join("")+", form: '"+cn(void 0,r.form)+"' }"}function mn(r,n){return 0===r.TAG?{TAG:0,index:n,form:r,children:r._0.map((function(r,t){return mn(r,n.concat([t]))}))}:{TAG:1,index:n,form:r}}var Tn={show:dn,dnaToFORM:function(r){return[]},toFORM:function(r){return[]},permute:function(r){return{dna:r.dna,form:r.form,vars:r.vars}},perspectives:function(r){return[]}},pn={show:sn,toFORMt:function r(n){if(!n)return{TAG:0,_0:[]};var t=n.tl,e=n.hd;return t?{TAG:0,_0:R(e,[r(t)])}:{TAG:0,_0:e}}},wn={mark:function(r){return{TAG:0,_0:r}},cVal:function(r){return{TAG:1,_0:r}},seqRE:function(r,n){return{TAG:2,_0:r,_1:n}},uncl:function(r){return{TAG:3,_0:r}},fVar:function(r){return{TAG:4,_0:r}},fDna:function(r){return{TAG:5,_0:r}},show:ln,ConstFORM:{reduce:function(r,n,t){return vn(n,t,r)},toVarFORM:function(r){return r.map(hn)}},VarFORM:{reduce:function(r,n,t){return En(n,t,r)}},getVars:function(r){return function(r){return on(r.data)}(En((function(r,n){return 4===n.TAG?function(r,n){var t=r.data,e=r.cmp,u=un(t,n,e);return u===t?r:{cmp:e,data:u}}(r,n._0):r}),function(r){return{cmp:r.cmp,data:void 0}}({cmp:E(Z)}),r))},countVars:function(r){return En((function(r,n){return 4===n.TAG?r+1|0:r}),0,r)}},gn={show:function(r){return"{ root, form: '"+ln(void 0,r.form)+"', children: ["+r.children.map(An).join(", ")+"] }"},parse:function(r){return{form:r,children:r.map((function(r,n){return mn(r,[n])}))}},testTrees:[{form:[],children:[]},{form:[{TAG:1,_0:1}],children:[{TAG:1,index:[0],form:{TAG:1,_0:1}}]},{form:[{TAG:0,_0:[]}],children:[{TAG:0,index:[0],form:{TAG:0,_0:[]},children:[]}]},{form:[{TAG:0,_0:[{TAG:1,_0:3},{TAG:0,_0:[]}]}],children:[{TAG:0,index:[0],form:{TAG:0,_0:[{TAG:1,_0:3},{TAG:0,_0:[]}]},children:[{TAG:1,index:[0,0],form:{TAG:1,_0:3}},{TAG:0,index:[0,1],form:{TAG:0,_0:[]},children:[]}]}]}]};function Gn(r){if("number"==typeof r)switch(r){case 0:return"|";case 1:return",";case 2:return"open";case 3:return"alt";case 4:return"."}else switch(0|r.TAG){case 0:return r._0?")":"(";case 1:return r._0?"}":"{";case 2:return B.show(r._0);case 3:var n=r._0;return n.length>1?'"'+n+'"':n;case 4:return"/"+r._0+"/";case 5:return Wr(r._0);case 6:switch(r._0){case 0:return"2r";case 1:return"2r+1";case 2:return""}case 7:return qr(r.sortNMUI,void 0,r.code);case 8:return"["+r._0.join(",")+"]"}}var Nn={toString:Gn},yn=pr("Formula-Formform.Lexer.LexError");function Rn(r,n){var t=function(n,t){for(;;){var e=t,u=n;if(!u)throw{RE_EXN_ID:yn,msg:"Closing '"+r+"' is missing!",Error:new Error};var i=u.tl,o=u.hd;if(o===r)return[e,i];t=e+o,n=i}}(n,""),e=t[0];if(""!==e)return[e,t[1]];throw{RE_EXN_ID:yn,msg:"Label should not be empty!",Error:new Error}}function In(r,n){var t=function(n,t){for(;;){var u=n;if(u){var i=u.hd;if(" "===i){n=u.tl;continue}if(i===r){if(0!==t.length)throw{RE_EXN_ID:yn,msg:"comma-separated list item must not be empty!",Error:new Error};return[t,u.tl]}if('"'===i){var o=Rn('"',u.tl);return e(o[1],R(t,[o[0]]))}var a=u.tl;if(a&&"_"===a.hd){var f=a.tl;if(f){var c=f.hd;if(an.includes(i)&&fn.includes(c))return e(f.tl,R(t,[i+"_"+c]))}}if(an.includes(i))return e(a,R(t,[i]));throw{RE_EXN_ID:yn,msg:"Unable to interpret '"+i+"'.",Error:new Error}}throw{RE_EXN_ID:yn,msg:"Closing '"+r+"' is missing!",Error:new Error}}},e=function(n,e){for(;;){var u=n;if(u){var i=u.hd;switch(i){case" ":n=u.tl;continue;case",":return t(u.tl,e);default:if(i===r)return[e,u.tl]}}throw{RE_EXN_ID:yn,msg:"Expected ',' or '"+r+"'.",Error:new Error}}};return t(n,[])}function kn(r,n){var t=function(r,n){for(;;){var t=n,e=r;if(!e)return[t,e];switch(e.hd){case" ":r=e.tl;continue;case"0":n=R(t,[0]),r=e.tl;continue;case"1":n=R(t,[1]),r=e.tl;continue;case"2":n=R(t,[2]),r=e.tl;continue;case"3":n=R(t,[3]),r=e.tl;continue;default:return[t,e]}}}(n,[]),e=Fr(r,t[0]);if(void 0!==e)return[e,t[1]];throw{RE_EXN_ID:yn,msg:"Invalid formDNA!",Error:new Error}}function Mn(r){for(;;){var n=r;if(!n)return 0;var t=n.hd,e=0,u=0;switch(t){case" ":r=n.tl;continue;case"(":return{hd:{TAG:0,_0:0},tl:Mn(n.tl)};case")":return{hd:{TAG:0,_0:1},tl:Mn(n.tl)};case":":var i=n.tl;if(i){if(":"===i.hd){var o=kn(!0,i.tl);return{hd:{TAG:7,sortNMUI:!0,code:o[0]},tl:Mn(o[1])}}u=2}else u=2;break;case"I":return{hd:{TAG:2,_0:2},tl:Mn(n.tl)};case"M":return{hd:{TAG:2,_0:3},tl:Mn(n.tl)};case"N":return{hd:{TAG:2,_0:0},tl:Mn(n.tl)};case"U":return{hd:{TAG:2,_0:1},tl:Mn(n.tl)};case"{":return{hd:{TAG:1,_0:0},tl:Mn(n.tl)};case"}":return{hd:{TAG:1,_0:1},tl:Mn(n.tl)};default:u=2}if(2===u){if("⁘"===t){var a=kn(!1,n.tl);return{hd:{TAG:7,sortNMUI:!1,code:a[0]},tl:Mn(a[1])}}switch(t){case'"':var f=Rn('"',n.tl);return{hd:{TAG:3,_0:f[0]},tl:Mn(f[1])};case",":return{hd:1,tl:Mn(n.tl)};case".":var c=n.tl;if(!c)return{hd:4,tl:Mn(c)};if("."!==c.hd)return{hd:4,tl:Mn(c)};var l=c.tl;if(!l)return{hd:4,tl:Mn(c)};if("@"!==l.hd)return{hd:4,tl:Mn(c)};var s=l.tl;if(!s)return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:0}},tl:Mn(s)};switch(s.hd){case".":var d=s.tl;return d&&"_"===d.hd?{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!0,interpr:0}},tl:Mn(d.tl)}:{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!1,interpr:0}},tl:Mn(d)};case"_":return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!0,interpr:0}},tl:Mn(s.tl)};case"~":var v=s.tl;if(!v)return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:1}},tl:Mn(v)};switch(v.hd){case".":var h=v.tl;return h&&"_"===h.hd?{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!0,interpr:1}},tl:Mn(h.tl)}:{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!1,interpr:1}},tl:Mn(h)};case"_":return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!0,interpr:1}},tl:Mn(v.tl)};default:return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:1}},tl:Mn(v)}}default:return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:0}},tl:Mn(s)}}case"/":var _=Rn("/",n.tl);return{hd:{TAG:4,_0:_[0]},tl:Mn(_[1])};case"2":var E=n.tl;if(E){if("r"===E.hd){var A=E.tl;if(!A)return{hd:{TAG:6,_0:0},tl:Mn(A)};if("+"!==A.hd)return{hd:{TAG:6,_0:0},tl:Mn(A)};var m=A.tl;return m&&"1"===m.hd?{hd:{TAG:6,_0:1},tl:Mn(m.tl)}:{hd:{TAG:6,_0:0},tl:Mn(A)}}e=1}else e=1;break;case"@":var T=n.tl;if(!T)return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:0}},tl:Mn(T)};switch(T.hd){case"_":return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!0,interpr:0}},tl:Mn(T.tl)};case"~":var p=T.tl;return p&&"_"===p.hd?{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!0,interpr:1}},tl:Mn(p.tl)}:{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:1}},tl:Mn(p)};default:return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:0}},tl:Mn(T)}}case"[":var w=In("]",n.tl);return{hd:{TAG:8,_0:w[0]},tl:Mn(w[1])};case"a":var g=n.tl;if(g&&"l"===g.hd){var G=g.tl;if(G){if("t"===G.hd)return{hd:3,tl:Mn(G.tl)};e=1}else e=1}else e=1;break;case"o":var N=n.tl;if(N&&"p"===N.hd){var y=N.tl;if(y&&"e"===y.hd){var R=y.tl;if(R){if("n"===R.hd)return{hd:2,tl:Mn(R.tl)};e=1}else e=1}else e=1}else e=1;break;case"|":return{hd:0,tl:Mn(n.tl)};default:e=1}}if(1===e){var I=n.tl,k=0;if(I&&"_"===I.hd){var M=I.tl;if(M){var P=M.hd;if(an.includes(t)&&fn.includes(P))return{hd:{TAG:3,_0:t+"_"+P},tl:Mn(M.tl)};k=2}else k=2}else k=2;if(2===k){if(an.includes(t))return{hd:{TAG:3,_0:t},tl:Mn(I)};throw{RE_EXN_ID:yn,msg:"Unable to interpret '"+t+"'.",Error:new Error}}}}}function Pn(r){return Mn(S(r.split("")))}var Dn=pr("Formula-Formform.Parser.ParseError");function bn(r){if(r){var n=r.hd;if("number"==typeof n)switch(n){case 2:var t=r.tl;if(t&&0===t.hd){var e=t.tl,u=0;if(e){var i=e.hd;if("number"==typeof i)if(3===i){var o=e.tl;if(o&&0===o.hd){var a=o.tl,f=0;if(a){var c=a.hd;if("number"==typeof c||6!==c.TAG)f=3;else{var l=a.tl;if(l){if(0===l.hd)return[{reEntryPar:c._0,unmarked:!0,interpr:1},l.tl];f=3}else f=3}}else f=3;if(3===f)return[{reEntryPar:2,unmarked:!0,interpr:1},a]}else u=2}else u=2;else if(6===i.TAG){var s=e.tl;if(s&&0===s.hd){var d=s.tl,v=i._0,h=0;if(d&&3===d.hd){var _=d.tl;if(_){if(0===_.hd)return[{reEntryPar:v,unmarked:!0,interpr:1},_.tl];h=3}else h=3}else h=3;if(3===h)return[{reEntryPar:v,unmarked:!0,interpr:0},d]}else u=2}else u=2}else u=2;if(2===u)return[{reEntryPar:2,unmarked:!0,interpr:0},e]}break;case 3:var E=r.tl;if(E&&0===E.hd){var A=E.tl,m=0;if(A){var T=A.hd;if("number"==typeof T)if(2===T){var p=A.tl;if(p&&0===p.hd){var w=p.tl,g=0;if(w){var G=w.hd;if("number"==typeof G||6!==G.TAG)g=3;else{var N=w.tl;if(N){if(0===N.hd)return[{reEntryPar:G._0,unmarked:!0,interpr:1},N.tl];g=3}else g=3}}else g=3;if(3===g)return[{reEntryPar:2,unmarked:!0,interpr:1},w]}else m=2}else m=2;else if(6===T.TAG){var y=A.tl;if(y&&0===y.hd){var R=y.tl,I=T._0,k=0;if(R&&2===R.hd){var M=R.tl;if(M){if(0===M.hd)return[{reEntryPar:I,unmarked:!0,interpr:1},M.tl];k=3}else k=3}else k=3;if(3===k)return[{reEntryPar:I,unmarked:!1,interpr:1},R]}else m=2}else m=2}else m=2;if(2===m)return[{reEntryPar:2,unmarked:!1,interpr:1},A]}}else switch(0|n.TAG){case 5:return[n._0,r.tl];case 6:var P=r.tl;if(P&&0===P.hd){var D=P.tl,b=n._0,S=0;if(D){var O=D.hd;if("number"==typeof O&&O>=2)switch(O){case 2:var V=D.tl;if(V&&0===V.hd){var L=V.tl,X=0;if(L&&3===L.hd){var F=L.tl;if(F){if(0===F.hd)return[{reEntryPar:b,unmarked:!0,interpr:1},F.tl];X=3}else X=3}else X=3;if(3===X)return[{reEntryPar:b,unmarked:!0,interpr:0},L]}else S=2;break;case 3:var x=D.tl;if(x&&0===x.hd){var j=x.tl,U=0;if(j&&2===j.hd){var q=j.tl;if(q){if(0===q.hd)return[{reEntryPar:b,unmarked:!0,interpr:1},q.tl];U=3}else U=3}else U=3;if(3===U)return[{reEntryPar:b,unmarked:!1,interpr:1},j]}else S=2;break;case 4:S=2}else S=2}else S=2;if(2===S)return[{reEntryPar:b,unmarked:!1,interpr:0},D]}}}return[{reEntryPar:2,unmarked:!1,interpr:0},r]}function Sn(r,n,t,e){for(;;){var u=e,i=t,o=void 0!==r&&r,a=void 0!==n&&n;if(i){var f=i.hd;if("number"==typeof f)switch(f){case 1:if(a)return[u,i];break;case 4:var c=i.tl;if(c){var l=c.hd;if("number"!=typeof l&&8===l.TAG){var s=c.tl;if(s){var d=s.hd;if("number"!=typeof d&&7===d.TAG){e=[{TAG:5,_0:{dna:d.code,form:u,vars:l._0}}],t=s.tl,n=a,r=o;continue}}}}}else switch(0|f.TAG){case 0:if(!f._0){var v=Sn(void 0,void 0,i.tl,[]);e=R(u,[{TAG:0,_0:v[0]}]),t=v[1],n=a,r=o;continue}if(!o)return[u,i.tl];if(o)throw{RE_EXN_ID:Dn,msg:"Missing '(' to open FORM.",Error:new Error};break;case 1:if(!f._0){var h=bn(i.tl),_=On(h[1],0);e=R(u,[{TAG:2,_0:h[0],_1:_[0]}]),t=_[1],n=a,r=o;continue}if(a)return[u,i];if(!a)throw{RE_EXN_ID:Dn,msg:"Missing '{' to open re-entry FORM.",Error:new Error};break;case 2:e=R(u,[{TAG:1,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 3:e=R(u,[{TAG:4,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 4:e=R(u,[{TAG:3,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 7:e=R(u,[{TAG:5,_0:{dna:f.code,form:void 0,vars:void 0}}]),t=i.tl,n=a,r=o;continue;case 8:var E=i.tl;if(E){var A=E.hd;if("number"!=typeof A&&7===A.TAG){e=R(u,[{TAG:5,_0:{dna:A.code,form:void 0,vars:f._0}}]),t=E.tl,n=a,r=o;continue}}}throw{RE_EXN_ID:Dn,msg:"Invalid token '"+Gn(f)+"'!",Error:new Error}}if(o)return[u,0];throw{RE_EXN_ID:Dn,msg:"Missing ')' to close FORM.",Error:new Error}}}function On(r,n){for(;;){var t=n;if(r){var e=Sn(!0,!0,r,[]),u=e[1],i=e[0];if(u){var o=u.hd;if("number"==typeof o){if(1===o){var a=u.tl;if(a){var f=a.hd;if("number"!=typeof f&&1===f.TAG&&f._0)return[{hd:[],tl:{hd:i,tl:t}},a.tl]}n={hd:i,tl:t},r=a;continue}throw{RE_EXN_ID:Dn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}if(1===o.TAG){if(o._0)return[{hd:i,tl:t},u.tl];throw{RE_EXN_ID:Dn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:Dn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:Dn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:Dn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}}function Vn(r){var n=Sn(!0,void 0,r,[]);if(b(n[1])>0)throw{RE_EXN_ID:Dn,msg:"Broken parse tree!",Error:new Error};return n[0]}function Ln(r){return Vn(Pn(r))}var Xn={LexError:yn,scan:Pn},Fn={ParseError:Dn,parse:Vn};function xn(r){for(var n={},t=r.length,e=0;e<t;++e){var u=r[e];n[u[0]]=u[1]}return n}var jn=2147483647,Un=-2147483648;function qn(r){return r>jn?jn:r<Un?Un:Math.floor(r)}function Bn(r){return I(r,(function(r){return B.showAsKey(r)})).join("")}function Cn(r,n){var t=void 0!==r&&r,e=n.split("").map((function(r){var n=mr(r);return void 0!==n?B.fromInt(t,n):B.tFromStr(void 0,r)}));if(e.every((function(r){return void 0!==r})))return e.map((function(r){return r}))}var Kn={show:function(r){return"["+I(r,(function(r){return B.show(r)})).join(",")+"]"},showAsKey:Bn,tFromStr:Cn};function Jn(r,n){var t=void 0!==r&&r;return{points:N(qn(Math.pow(4,n)),(function(r){var e=Ar(r.toString(4),n,"0"),u=Cn(t,e);if(void 0!==u)return u;throw{RE_EXN_ID:"Not_found",Error:new Error}})),dim:n}}var zn={getPoints:function(r){return r.points},getDimension:function(r){return r.dim},make:Jn,toDNA:function(r,n){return Or(r.points.map(h(n)).reverse())}};function Hn(r,n){var t=r.dim,e=function(r,u){return u>=t?{TAG:0,_0:v(n,s(r,0))}:{TAG:1,_0:I(B.tEnum(void 0,void 0),(function(n){var t=function(r,n){for(var t=r.length,e=0,u=0,i=new Array(t),o=new Array(t),a=0;a<t;++a){var f=r[a];n(f)?(i[e]=f,e=e+1|0):(o[u]=f,u=u+1|0)}return i.length=e,o.length=u,[i,o]}(r,h((function(r){return s(r,u)===n})));return[n,e(t[0],u+1|0)]}))}};return e(r.points,0)}var $n={show:function r(n,t){var e=void 0!==n?n:0;if(0===t.TAG)return"<"+B.show(t._0)+">";var u=t._0,i=g(u,0),o=void 0!==i&&0===i[1].TAG,a=o?"":"\n",f=o?"":"  ";return"["+a+I(u,(function(n){return f.repeat(e+1|0)+(B.show(n[0])+": ")+r(e+1|0,n[1])})).join(", "+a)+a+f.repeat(e)+"]"},makeUnsafe_Cell:function(r){return{TAG:0,_0:r}},makeUnsafe_Map:function(r){return{TAG:1,_0:r}},make:Hn,fromDNA:function(r){var n=r,t=Jn(void 0,qn(Math.log(n.length)/Math.log(4)));return Hn(t,(function(n){var e,u=t.dim-1|0,i=(Pr(r)-1|0)-(u<0?0:function(r,n,t){for(var e=0,u=0,i=r.length;u<i;++u)e=t(e,r[u],u);return e}(n,0,3===(e=function(r,n,t){var e=0|Math.pow(4,u-t|0);return r+Math.imul(e,B.toInt(void 0,n))|0}).length?e:function(r,n,t){return function(r,n,t,e){var u=r.length;if(3===u)return r(n,t,e);switch(u){case 1:return d(r(n),[t,e]);case 2:return d(r(n,t),[e]);case 3:return r(n,t,e);case 4:return function(u){return r(n,t,e,u)};case 5:return function(u,i){return r(n,t,e,u,i)};case 6:return function(u,i,o){return r(n,t,e,u,i,o)};case 7:return function(u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n,t,e])}}(e,r,n,t)}))|0,o=kr(r,i);if(void 0!==o)return o;throw{RE_EXN_ID:"Not_found",Error:new Error}}))}},Qn={fromDictUnsafe:function(r){return r},show:function(r){return"VSpace -> DNA\n-------------\n"+I(function(r){for(var n=Object.keys(r),t=n.length,e=new Array(t),u=0;u<t;++u){var i=n[u];e[u]=[i,r[i]]}return e}(r),(function(r){return r[0]+" -> "+B.show(r[1])})).join("\n")},make:function(r,n){return xn(I(r.points,(function(r){return[Bn(r),v(n,r)]})))},fromDNA:function(r){var n=r;return xn(y(Jn(void 0,qn(Math.log(n.length)/Math.log(4))).points,n.reverse(),(function(r,n){return[Bn(r),n]})))}};function Wn(r){return{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}}]}}function Yn(r){return{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}}]}}function Zn(r){return{TAG:0,_0:[{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:4,_0:r}]},{TAG:0,_0:[{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:0,_0:[{TAG:4,_0:r}]}]}]}}function rt(r){return{TAG:0,_0:[{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:0,_0:[{TAG:4,_0:r}]}]},{TAG:0,_0:[{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:4,_0:r}]}]}}function nt(r,n){switch(r){case 0:return Wn(n);case 1:return Zn(n);case 2:return rt(n);case 3:return Yn(n)}}var tt={n:Wn,m:Yn,u:Zn,i:rt,get:nt,fromVPoint:function(r,n){var t=void 0!==r?r:Ir;if(t.length<n.length)throw function(r){throw new RangeError("Insufficient variables in given list!")}();return{TAG:0,_0:k(n,(function(r,n){return{TAG:0,_0:[nt(n,s(t,r))]}}))}}},et={Imply:{apply:function(r,n){var t=v(n,r);return void 0!==t?t:r}},Equiv:{applyL:function(r,n){var t=v(n[0],r);return void 0!==t?t:r},applyR:function(r,n){var t=v(n[1],r);return void 0!==t?t:r}}},ut={refl:[function(r){return[{TAG:0,_0:[{TAG:0,_0:r}]}]},function(r){if(1===r.length){var n=r[0];if(0===n.TAG){var t=n._0;if(1===t.length){var e=t[0];return 0===e.TAG?e._0:void 0}}}}]};function it(r,n){if(r.length===n.length)return A(xn(k(r,(function(r,t){return[n[r],t]}))))}function ot(r,n){return r.map((function(r){switch(0|r.TAG){case 0:return{TAG:0,_0:ot(r._0,n)};case 1:return{TAG:1,_0:r._0};case 2:return{TAG:2,_0:r._0,_1:ft(r._1,n)};case 3:return{TAG:3,_0:r._0};case 4:var t=function(r,n){if(n in r)return A(r[n])}(n,r._0);if(void 0!==t)return{TAG:1,_0:t};throw{RE_EXN_ID:"Not_found",Error:new Error};case 5:return{TAG:5,_0:at(r._0,n)}}}))}function at(r,n){var t=r.form,e=void 0!==t?ot(t,n):void 0;return{dna:r.dna,form:e,vars:void 0}}function ft(r,n){return D(r,(function(r){return ot(r,n)}))}function ct(r){return r.reduce((function(r,n){return B.rel(r,function(r){switch(0|r.TAG){case 0:var n=r._0;return 0!==n.length?B.inv(ct(n)):3;case 1:return r._0;case 2:return nn(r._0,{NAME:"NestToR",VAL:D(r._1,ct)});case 3:return 1;case 5:return 0}}(n))}),0)}function lt(r){if(!r)return 3;var n=r.tl,t=r.hd;return n?B.inv(B.rel(ct(t),lt(n))):B.inv(ct(t))}function st(r,n){return ct(ot(r,n))}function dt(r){var n=wn.getVars(r),t=n.length,e=zn.make(void 0,t);return{dna:Or(zn.getPoints(e).map((function(t){var e=it(t,n);if(void 0!==e)return ct(ot(r,m(e)));throw{RE_EXN_ID:"Not_found",Error:new Error}})).reverse()),form:r,vars:n}}var vt={toVPoint:function(r){for(var n=Object.keys(r),t=n.length,e=new Array(t),u=0;u<t;++u)e[u]=r[n[u]];return e},fromVPoint:it,interpret:ot},ht=ct,_t={Calc:t,DNA:e,SeqRE:u,Expr:i,Formula:o,Value:a,Alg:f,Eval:c};return n.default}()}));
//# sourceMappingURL=formformRAW.min.js.map