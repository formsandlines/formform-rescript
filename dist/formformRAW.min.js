!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.formform=n():r.formform=n()}(this,(function(){return function(){"use strict";var r={d:function(n,t){for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},o:function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},r:function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},n={};r.d(n,{default:function(){return Yn}});var t={};r.r(t),r.d(t,{Const:function(){return B},Nested:function(){return H}});var e={};r.r(e),r.d(e,{fromIntArr:function(){return Er},fromIntArrUnsafe:function(){return Ar},fromStrArr:function(){return mr},fromStrArrUnsafe:function(){return Tr},genRandom:function(){return vr},get:function(){return ar},getLength:function(){return fr},getSize:function(){return cr},inv:function(){return Gr},isValidLength:function(){return lr},make:function(){return sr},makeUnsafe:function(){return dr},raw:function(){return pr},rel:function(){return gr},reorderToNMUI:function(){return _r},show:function(){return wr},toArray:function(){return hr}});var u={};r.r(u),r.d(u,{calcRE:function(){return br},getUType:function(){return Mr},mnFromStr:function(){return Rr},recIdent:function(){return Dr},recInstr:function(){return Sr},showMN:function(){return kr},showSig:function(){return Ir},showUType:function(){return Pr},sigFromJs:function(){return yr},sigToJs:function(){return Nr}});var i={};r.r(i),r.d(i,{DepthTree:function(){return un},FCON:function(){return tn},FORM:function(){return nn},FVAR:function(){return en},FormDNA:function(){return Zr},Sequence:function(){return rn},idxClass_unquoted:function(){return qr},lblClass_unquoted:function(){return Br}});var o={};r.r(o),r.d(o,{Lexer:function(){return wn},Parser:function(){return pn},Token:function(){return an},read:function(){return Tn}});var a={};r.r(a),r.d(a,{VMap:function(){return Sn},VPoint:function(){return kn},VSpace:function(){return Mn},VTable:function(){return Dn}});var f={};r.r(f),r.d(f,{Isolator:function(){return xn},Pattern:function(){return jn},PrimAlg:function(){return Bn}});var c={};function l(r,n,t){for(var e=new Array(t),u=0,i=n;u<t;)e[u]=r[i],u=u+1|0,i=i+1|0;return e}function s(r,n){if(n<0||n>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[n]}function d(r,n){for(;;){var t=n,e=r,u=e.length,i=0===u?1:u,o=i-t.length|0;if(0===o)return e.apply(null,t);if(o>=0)return function(r,n){return function(t){return d(r,n.concat([t]))}}(e,t);n=l(t,i,0|-o),r=e.apply(null,l(t,0,i))}}function v(r,n){var t=r.length;if(1===t)return r(n);switch(t){case 1:return r(n);case 2:return function(t){return r(n,t)};case 3:return function(t,e){return r(n,t,e)};case 4:return function(t,e,u){return r(n,t,e,u)};case 5:return function(t,e,u,i){return r(n,t,e,u,i)};case 6:return function(t,e,u,i,o){return r(n,t,e,u,i,o)};case 7:return function(t,e,u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n])}}function h(r){return 1===r.length?r:function(n){return v(r,n)}}function _(r,n,t){var e=r.length;if(2===e)return r(n,t);switch(e){case 1:return d(r(n),[t]);case 2:return r(n,t);case 3:return function(e){return r(n,t,e)};case 4:return function(e,u){return r(n,t,e,u)};case 5:return function(e,u,i){return r(n,t,e,u,i)};case 6:return function(e,u,i,o){return r(n,t,e,u,i,o)};case 7:return function(e,u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n,t])}}function E(r){return 2===r.length?r:function(n,t){return _(r,n,t)}}function A(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function m(r){return function(r,n){for(;;){var t=n,e=r;if(!e)return t;n={hd:e.hd,tl:t},r=e.tl}}(r,0)}function T(r,n){return r<n?-1:r===n?0:1}function w(r,n){return r===n?0:r<n?-1:1}function p(r,n){if(n>=0&&n<r.length)return A(r[n])}function G(r,n){return function(r,n){if(r<=0)return[];for(var t=new Array(r),e=0;e<r;++e)t[e]=n(e);return t}(r,h(n))}function g(r,n,t){return function(r,n,t){for(var e=r.length,u=n.length,i=e<u?e:u,o=new Array(i),a=0;a<i;++a)o[a]=t(r[a],n[a]);return o}(r,n,E(t))}function N(r,n){for(var t=r.length,e=n.length,u=new Array(t+e|0),i=0;i<t;++i)u[i]=r[i];for(var o=0;o<e;++o)u[t+o|0]=n[o];return u}function y(r,n){return function(r,n){for(var t=r.length,e=new Array(t),u=0;u<t;++u)e[u]=n(r[u]);return e}(r,h(n))}function R(r,n){return function(r,n){for(var t=r.length,e=new Array(t),u=0;u<t;++u)e[u]=n(u,r[u]);return e}(r,E(n))}function I(r,n,t){return function(r,n,t){for(var e=n,u=0,i=r.length;u<i;++u)e=t(e,r[u]);return e}(r,n,E(t))}function k(r,n){for(;;){var t=n,e=r;if(!e)return t;var u={hd:e.hd,tl:0};t.tl=u,n=u,r=e.tl}}function P(r,n){return function(r,n){if(!r)return 0;var t={hd:n(r.hd),tl:0};return function(r,n,t){for(;;){var e=n,u=r;if(!u)return;var i={hd:t(u.hd),tl:0};e.tl=i,n=i,r=u.tl}}(r.tl,t,n),t}(r,h(n))}function M(r){for(var n=r,t=0;;){if(!n)return t;t=t+1|0,n=n.tl}}function b(r){for(var n=r.length-1|0,t=0;;){var e=t,u=n;if(u<0)return e;t={hd:r[u],tl:e},n=u-1|0}}function S(r){var n=M(r),t=new Array(n);return function(r,n,t){for(;;){var e=t,u=n;if(!e)return;r[u]=e.hd,t=e.tl,n=u+1|0}}(t,0,r),t}function D(r,n,t){return function(r,n,t){for(;;){var e=r;if(!e)return n;n=t(n,e.hd),r=e.tl}}(r,n,E(t))}function V(r,n,t){return r?t(V(r.tl,n,t),r.hd):n}function L(r,n,t){return M(r)<1e3?V(r,n,t):function(r,n,t){for(var e=n,u=r.length-1|0;u>=0;--u)e=t(e,r[u]);return e}(S(r),n,t)}function O(r,n){return function(r,n){for(;;){var t=r;if(!t)return!1;if(n(t.hd))return!0;r=t.tl}}(r,h(n))}function X(r){if(r<=3&&0<=r)return r-0|0}function F(r){switch(r){case 0:return"N";case 1:return"U";case 2:return"I";case 3:return"M"}}function x(r){switch(r){case 0:return 3;case 1:return 2;case 2:return 1;case 3:return 0}}function j(r,n){if(0===n)return r;switch(r){case 0:return n;case 1:return n>=2?3:1;case 2:return 2!==n?3:2;case 3:return 3}}r.r(c),r.d(c,{$$eval:function(){return Wn},Interpr:function(){return Qn},evalAll:function(){return Hn},evalSeq:function(){return zn},interEval:function(){return $n}});var B={tToJs:function(r){return r+0|0},tFromJs:X,tEnum:function(r,n){return void 0!==r&&r?[0,3,1,2]:[0,1,2,3]},tEnumList:function(r,n){return void 0!==r&&r?{hd:0,tl:{hd:3,tl:{hd:1,tl:{hd:2,tl:0}}}}:{hd:0,tl:{hd:1,tl:{hd:2,tl:{hd:3,tl:0}}}}},show:F,showAsKey:function(r){switch(r){case 0:return"N";case 1:return"U";case 2:return"I";case 3:return"M"}},toInt:function(r,n){var t=void 0!==r&&r,e=n+0|0;switch(e){case 0:return e;case 1:return t?2:e;case 2:return t?3:e;case 3:return t?1:e;default:return-99}},fromInt:function(r,n){var t=void 0!==r&&r,e=X(n);if(!t)return e;if(void 0===e)return e;switch(e){case 0:return e;case 1:return 3;case 2:return 1;case 3:return 2}},tFromStr:function(r){switch(r){case"(mn)":case"I":case"i":return 2;case"()":case"M":case"m":return 3;case"":case"(())":case".":case"N":case"n":return 0;case"U":case"mn":case"u":return 1;default:return}},inv:x,rel:j};function q(r){for(;;){var n=r;if(!n)return n;var t=n.hd;if(0===t){var e=n.tl;if(e&&0===e.hd){r=e.tl;continue}}return{hd:t,tl:q(n.tl)}}}function U(r){return{NAME:"NestToL",VAL:q(r.VAL)}}function C(r){return{NAME:"NestToR",VAL:q(r.VAL)}}function K(r,n){if(!r)return r;var t=r.tl,e=r.hd;return t?0!==e?e>=3?{hd:3,tl:0}:void 0!==n?n===e?{hd:0,tl:K(t,n)}:{hd:3,tl:0}:{hd:e,tl:K(t,e)}:{hd:0,tl:K(t,n)}:2!==e&&1!==e||void 0===n?r:n===e?{hd:0,tl:0}:{hd:3,tl:0}}function J(r){return{NAME:"NestToL",VAL:m(K(m(r.VAL),void 0))}}function z(r){return{NAME:"NestToR",VAL:K(r.VAL,void 0)}}function $(r){if(!r)return 0;var n=r.tl,t=r.hd;return n?0!==t?t>=3?3:j(t,x($(n))):x($(n)):t}var H={show:function(r){if("NestToR"===r.NAME){var n=r.VAL;return n?"("+L(n,"",E((function(r,n){return F(n)+(r.length>0?"("+r+")":"")})))+")":"M"}var t=r.VAL;return t?"("+D(t,"",(function(r,n){return(r.length>0?"("+r+")":"")+F(n)}))+")":"M"},getList:function(r){return r.VAL},fromArrayToL:function(r){return{NAME:"NestToL",VAL:b(r)}},fromArrayToR:function(r){return{NAME:"NestToR",VAL:b(r)}},toArray:function(r){return S(r.VAL)},fmapL:function(r,n){return{NAME:"NestToL",VAL:v(n,r.VAL)}},fmapR:function(r,n){return{NAME:"NestToR",VAL:v(n,r.VAL)}},reduceByCrossingL:U,reduceByCrossingR:C,reduceByCallingL:J,reduceByCallingR:z,reduceL:function(r){return U(J({NAME:"NestToL",VAL:r.VAL}))},reduceR:function(r){return C(z({NAME:"NestToR",VAL:r.VAL}))},calcL:function(r){var n=r.VAL;return n?x($(m(n))):3},calcR:function(r){var n=r.VAL;return n?x($(n)):3}},Q=function(r,n){for(var t in r)n(t)};function W(r,n){if(r===n)return 0;var t,e=typeof r,u=typeof n;switch(e){case"boolean":if("boolean"===u)return t=n,r?t?0:1:t?-1:0;break;case"function":if("function"===u)throw{RE_EXN_ID:"Invalid_argument",_1:"compare: functional value",Error:new Error};break;case"number":if("number"===u)return T(r,n);break;case"string":return"string"===u?w(r,n):1;case"undefined":return-1}switch(u){case"string":return-1;case"undefined":return 1;default:if("boolean"===e)return 1;if("boolean"===u)return-1;if("function"===e)return 1;if("function"===u)return-1;if("number"===e)return null===n||void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if("number"===u)return null===r||void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(null===r)return void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if(null===n)return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(void 0!==r.BS_PRIVATE_NESTED_SOME_NONE)return void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?Y(r,n):-1;var i=0|r.TAG,o=0|n.TAG;if(248===i)return T(r[1],n[1]);if(251===i)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(i!==o)return i<o?-1:1;var a=0|r.length,f=0|n.length;if(a===f){if(!Array.isArray(r))return r instanceof Date&&n instanceof Date?r-n:Y(r,n);for(var c=0;;){var l=c;if(l===a)return 0;var s=W(r[l],n[l]);if(0!==s)return s;c=l+1|0}}else if(a<f)for(var d=0;;){var v=d;if(v===a)return-1;var h=W(r[v],n[v]);if(0!==h)return h;d=v+1|0}else for(var _=0;;){var E=_;if(E===f)return 1;var A=W(r[E],n[E]);if(0!==A)return A;_=E+1|0}}}function Y(r,n){var t={contents:void 0},e={contents:void 0},u=function(r,n){var t=r[2],e=r[1];if(!e.hasOwnProperty(n)||W(r[0][n],e[n])>0){var u=t.contents;return void 0!==u&&n>=u?void 0:void(t.contents=n)}},i=[r,n,e],o=[n,r,t];Q(r,(function(r){return u(i,r)})),Q(n,(function(r){return u(o,r)}));var a=t.contents,f=e.contents;return void 0!==a?void 0!==f?w(a,f):-1:void 0!==f?1:0}function Z(r,n){if(r===n)return!0;var t=typeof r;if("string"===t||"number"===t||"boolean"===t||"undefined"===t||null===r)return!1;var e=typeof n;if("function"===t||"function"===e)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if("number"===e||"undefined"===e||null===n)return!1;var u=0|r.TAG,i=0|n.TAG;if(248===u)return r[1]===n[1];if(251===u)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(u!==i)return!1;var o=0|r.length;if(o!==(0|n.length))return!1;if(!Array.isArray(r)){if(r instanceof Date&&n instanceof Date)return!(r>n||r<n);var a={contents:!0};return Q(r,(function(r){n.hasOwnProperty(r)||(a.contents=!1)})),a.contents&&Q(n,(function(t){r.hasOwnProperty(t)&&Z(n[t],r[t])||(a.contents=!1)})),a.contents}for(var f=0;;){var c=f;if(c===o)return!0;if(!Z(r[c],n[c]))return!1;f=c+1|0}}var rr={contents:0};function nr(r){return rr.contents=rr.contents+1|0,r+"/"+rr.contents}function tr(r,n){return r?{hd:n,tl:{hd:r.hd,tl:tr(r.tl,n)}}:0}function er(r,n){return r?{hd:r.hd,tl:tr(r.tl,n)}:0}function ur(r){return r?r.hd+ur(r.tl):""}var ir=function(r,n){return ur(er(r,n))},or="abcdefghijklmnopqrstuvwxyz".split(""),ar=p;function fr(r){return r.length}function cr(r){var n=r.length;return Math.log(n)/Math.log(4)|0}function lr(r){return void 0!==function(r){var n=Math.log(r)/Math.log(4);return!Number.isFinite(n)||function(r){return(0|r)<r}(n)?void 0:0|n}(r)}function sr(r){if(lr(r.length))return r}function dr(r){if(lr(r.length))return r;throw{RE_EXN_ID:"Not_found",Error:new Error}}function vr(r){return[]}function hr(r){return r}function _r(r){var n=r.length;if(n<4)return r;var t=n/4|0;return function(r){for(var n=r.length,t=0,e=0;e<n;++e)t=t+r[e].length|0;var u=new Array(t);t=0;for(var i=0;i<n;++i)for(var o=r[i],a=0,f=o.length;a<f;++a)u[t]=o[a],t=t+1|0;return u}(G(4,(function(e){var u;switch(e){case 0:u=1;break;case 1:u=2;break;case 2:u=0;break;default:u=e}var i=Math.imul(u,t),o=r.slice(i,i+t|0);return n>4?_r(o):o})))}function Er(r,n){var t=void 0!==r&&r;return!1===lr(n.length)?void 0:n.map((function(r){var n=B.fromInt(t,r);if(void 0!==n)return n;throw{RE_EXN_ID:"Not_found",Error:new Error}}))}function Ar(r,n){var t=Er(void 0!==r&&r,n);if(void 0!==t)return t;throw{RE_EXN_ID:"Not_found",Error:new Error}}function mr(r){return!1===lr(r.length)?void 0:r.map((function(r){var n=B.tFromStr(r);if(void 0!==n)return n;throw{RE_EXN_ID:"Not_found",Error:new Error}}))}function Tr(r){var n=mr(r);if(void 0!==n)return n;throw{RE_EXN_ID:"Not_found",Error:new Error}}function wr(r,n,t){var e=void 0!==r&&r,u=void 0!==n&&n,i=e?_r(t):t,o=(e?"::":"⁘")+(u?" ":"");return Z(i,[])?o+B.toInt(e,0).toString():o+i.reduce((function(r,n,t){return r+(u&&t>0&&t%4==0?" ":"")+B.toInt(e,n).toString()}),"")}function pr(r){return Z(r,[])?B.showAsKey(0):r.map((function(r){return B.showAsKey(r)})).join("")}function Gr(r){return Z(r,[])?[B.inv(0)]:r.map((function(r){return B.inv(r)}))}function gr(r,n){var t=r.length,e=n.length,u=t<=e?[r,n,t,e]:[n,r,e,t],i=u[3],o=u[2],a=u[1],f=g(a,u[0],(function(r,n){return B.rel(r,n)}));return o===i?f:N(f,function(r,n,t){if(t<=0)return[];var e,u=r.length,i=n<0?(e=u+n|0)>0?e:0:n,o=u-i|0,a=o<t?o:t;if(a<=0)return[];for(var f=new Array(a),c=0;c<a;++c)f[c]=r[i+c|0];return f}(a,o,i))}function Nr(r){return{reEntryPar:r.reEntryPar,unmarked:r.unmarked,interpr:r.interpr}}function yr(r){return{reEntryPar:r.reEntryPar,unmarked:r.unmarked,interpr:r.interpr}}function Rr(r){switch(r){case"RecIdent":case"Recursive Identity":case"id":case"rId":case"recIdent":return 1;case"RecInstr":case"Recursive Instruction":case"in":case"rIn":case"recInstr":return 0;default:throw{RE_EXN_ID:"Not_found",Error:new Error}}}function Ir(r){var n;switch(r.reEntryPar){case 0:n=["..",""];break;case 1:n=["..","."];break;case 2:n=["",""]}var t=r.interpr?"@~":"@";return n[0]+t+n[1]+(r.unmarked?"_":"")}function kr(r){return r?"recursive identity":"recursive instruction"}function Pr(r){return r?"iFORM":"uFORM"}function Mr(r,n){switch(n){case 0:return r.unmarked?1:0;case 1:switch(r.reEntryPar){case 0:return 0;case 1:case 2:return 1}case 2:return 1}}function br(r,n){var t=n.VAL,e=r.interpr,u=r.unmarked,i=r.reEntryPar,o=0===t||function(r){for(var n=0,t=r;;){var e=n;if(!t)return e;t=t.tl,n=e+1|0}}(t)%2!=0?1:0,a=Mr({reEntryPar:i,unmarked:u,interpr:e},o);if(0===t||function(r,n){for(;;){var t=r;if(!t)return!0;if(!n(t.hd))return!1;r=t.tl}}(t,h((function(r){return 0===r}))))return a?2:1;var f=u||1!==o||0!==i?t:function(r,n){if(!r)return n;var t={hd:r.hd,tl:0};return k(r.tl,t).tl=n,t}(t,t);if(O(f,(function(r){return 3===r}))||O(f,(function(r){return 1===r}))&&O(f,(function(r){return 2===r}))){var c=H.calcR(H.reduceR({NAME:"NestToR",VAL:f}));return u?B.inv(c):c}var l=H.reduceR({NAME:"NestToR",VAL:f}).VAL,s=function(r){if(r)return A(r.hd)}(l);if(1===e&&!u&&Z(s,0)){if(l){var d=l.tl;if(d){var v=d.hd;return a?B.rel(2,v):B.rel(1,v)}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",144,58],Error:new Error}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",144,58],Error:new Error}}if(1===e&&u&&!Z(s,0)){if(void 0!==s)return a?B.rel(2,s):B.rel(1,s);throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",163,58],Error:new Error}}if(u){if(l){var _=l.hd;if(0!==_){if(_<3){var E=l.tl;if(!E)return 0===i?2:1;if(0===E.hd&&!E.tl)return 1}}else{var m=l.tl;if(m&&m.hd-1>>>0<=1){var T=m.tl;if(!T)return 2;if(0===T.hd&&!T.tl)return 0===i?1:2}}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",198,60],Error:new Error}}if(l){var w=l.hd;if(0!==w){if(w<3){var p=l.tl;if(!p)return 0===i?1:2;if(0===p.hd&&!p.tl)return 1}}else{var G=l.tl;if(G&&G.hd-1>>>0<=1){var g=G.tl;if(!g)return 2;if(0===g.hd&&!g.tl)return 0===i?2:1}}}throw{RE_EXN_ID:"Assert_failure",_1:["SeqRE.res",189,60],Error:new Error}}var Sr=0,Dr=1;function Vr(r,n,t){var e=void 0!==r?r.h:0,u=void 0!==t?t.h:0;return{v:n,h:(e>=u?e:u)+1|0,l:r,r:t}}function Lr(r,n){return void 0===n||void 0!==r&&r.h>=n.h}function Or(r,n,t){var e=void 0!==r?r.h:0,u=void 0!==t?t.h:0;if(e>(u+2|0)){var i=r.l,o=r.r;return Lr(i,o)?Vr(i,r.v,Vr(o,n,t)):Vr(Vr(i,r.v,o.l),o.v,Vr(o.r,n,t))}if(u<=(e+2|0))return{v:n,h:(e>=u?e:u)+1|0,l:r,r:t};var a=t.l,f=t.r;return Lr(f,a)?Vr(Vr(r,n,a),t.v,f):Vr(Vr(r,n,a.l),a.v,Vr(a.r,t.v,f))}function Xr(r){var n=r.l,t=r.r;return(1+(void 0!==n?Xr(n):0)|0)+(void 0!==t?Xr(t):0)|0}function Fr(r,n,t){for(;;){var e=n,u=r,i=u.v,o=u.l,a=u.r,f=void 0!==o?Fr(o,e,t):e;t[f]=i;var c=f+1|0;if(void 0===a)return c;n=c,r=a}}function xr(r,n,t){if(void 0===r)return function(r){return{v:r,h:1,l:void 0,r:void 0}}(n);var e=r.v,u=t(n,e);if(0===u)return r;var i=r.l,o=r.r;if(u<0){var a=xr(i,n,t);return a===i?r:Or(a,e,o)}var f=xr(o,n,t);return f===o?r:Or(i,e,f)}var jr=function(r){if(void 0===r)return[];var n=Xr(r),t=new Array(n);return Fr(r,0,t),t},Br=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω"],qr=N(["0","1","2","3","4","5","6","7","8","9"],Br);function Ur(r,n){var t,e,u=void 0!==r&&r;switch(0|n.TAG){case 0:return"("+Cr(u,n._0)+")";case 1:return B.show(n._0);case 2:return"{"+Ir(n._0)+" "+Kr(u,n._1)+"}";case 3:return"/"+n._0+"/";case 4:var i=n._0;return(3===(e=(t=i).length)&&"_"===t[1]?Br.includes(t[0])&&qr.includes(t[2]):1===e&&Br.includes(t[0]))?i:'"'+i+'"';case 5:return"["+Jr(u,n._0)+"]"}}function Cr(r,n){var t=void 0!==r&&r;return n.map((function(r){return Ur(t,r)})).join("")}function Kr(r,n){var t=void 0!==r&&r;return ir(P(function(r,n){for(;;){var t=n,e=r;if(!e)return t;n={hd:e.hd,tl:t},r=e.tl}}(n,0),(function(r){return Cr(t,r)})),",")}function Jr(r,n){var t,e=n.vars,u=n.form,i=void 0!==r&&r;if(void 0!==u)if(void 0!==e){var o=e.join(",");t=Cr(i,u)+".["+o+"]"}else t=Cr(i,u);else t="";return t+wr(i,void 0,n.dna)}function zr(r,n,t){return I(t,n,(function(n,t){var e=_(r,n,t);switch(0|t.TAG){case 0:return zr(r,e,t._0);case 2:return D(t._1,e,(function(n,t){return zr(r,n,t)}));default:return e}}))}function $r(r){switch(0|r.TAG){case 0:return{TAG:0,_0:r._0.map($r)};case 1:return{TAG:1,_0:r._0};case 2:return{TAG:2,_0:r._0,_1:P(r._1,(function(r){return r.map($r)}))};case 3:return{TAG:3,_0:r._0};case 5:return{TAG:5,_0:Hr(r._0)}}}function Hr(r){var n=r.form,t=void 0!==n?n.map($r):void 0;return{dna:r.dna,form:t,vars:r.vars}}function Qr(r,n,t){return I(t,n,(function(n,t){var e=_(r,n,t);switch(0|t.TAG){case 0:return Qr(r,e,t._0);case 2:return D(t._1,e,(function(n,t){return Qr(r,n,t)}));default:return e}}))}function Wr(r){return 0===r.TAG?"{ index: "+r.index.join("")+", form: '"+Ur(void 0,r.form)+"', children: ["+r.children.map(Wr).join(", ")+"] }":"{ index: "+r.index.join("")+", form: '"+Ur(void 0,r.form)+"' }"}function Yr(r,n){return 0===r.TAG?{TAG:0,index:n,form:r,children:r._0.map((function(r,t){return Yr(r,n.concat([t]))}))}:{TAG:1,index:n,form:r}}var Zr={show:Jr,dnaToFORM:function(r){return[]},toFORM:function(r){return[]}},rn={show:Kr,toFORMt:function r(n){if(!n)return{TAG:0,_0:[]};var t=n.tl,e=n.hd;return t?{TAG:0,_0:N(e,[r(t)])}:{TAG:0,_0:e}}},nn={mark:function(r){return{TAG:0,_0:r}},cVal:function(r){return{TAG:1,_0:r}},seqRE:function(r,n){return{TAG:2,_0:r,_1:n}},uncl:function(r){return{TAG:3,_0:r}},fVar:function(r){return{TAG:4,_0:r}},fDna:function(r){return{TAG:5,_0:r}},show:Cr},tn={reduce:function(r,n,t){return zr(n,t,r)},toFVAR:function(r){return r.map($r)}},en={reduce:function(r,n,t){return Qr(n,t,r)},getVars:function(r){return function(r){return jr(r.data)}(Qr((function(r,n){return 4===n.TAG?function(r,n){var t=r.data,e=r.cmp,u=xr(t,n,e);return u===t?r:{cmp:e,data:u}}(r,n._0):r}),function(r){return{cmp:r.cmp,data:void 0}}({cmp:E(W)}),r))},countVars:function(r){return Qr((function(r,n){return 4===n.TAG?r+1|0:r}),0,r)}},un={show:function(r){return"{ root, form: '"+Cr(void 0,r.form)+"', children: ["+r.children.map(Wr).join(", ")+"] }"},parse:function(r){return{form:r,children:r.map((function(r,n){return Yr(r,[n])}))}},testTrees:[{form:[],children:[]},{form:[{TAG:1,_0:1}],children:[{TAG:1,index:[0],form:{TAG:1,_0:1}}]},{form:[{TAG:0,_0:[]}],children:[{TAG:0,index:[0],form:{TAG:0,_0:[]},children:[]}]},{form:[{TAG:0,_0:[{TAG:1,_0:3},{TAG:0,_0:[]}]}],children:[{TAG:0,index:[0],form:{TAG:0,_0:[{TAG:1,_0:3},{TAG:0,_0:[]}]},children:[{TAG:1,index:[0,0],form:{TAG:1,_0:3}},{TAG:0,index:[0,1],form:{TAG:0,_0:[]},children:[]}]}]}]};function on(r){if("number"==typeof r)switch(r){case 0:return"|";case 1:return",";case 2:return"open";case 3:return"alt";case 4:return"."}else switch(0|r.TAG){case 0:return r._0?")":"(";case 1:return r._0?"}":"{";case 2:return B.show(r._0);case 3:var n=r._0;return n.length>1?'"'+n+'"':n;case 4:return"/"+r._0+"/";case 5:return Ir(r._0);case 6:switch(r._0){case 0:return"2r";case 1:return"2r+1";case 2:return""}case 7:return wr(r.sortNMUI,void 0,r.code);case 8:return"["+r._0.join(",")+"]"}}var an={toString:on},fn=nr("Formula-Formform.Lexer.LexError");function cn(r,n){var t=function(n,t){for(;;){var e=t,u=n;if(!u)throw{RE_EXN_ID:fn,msg:"Closing '"+r+"' is missing!",Error:new Error};var i=u.tl,o=u.hd;if(o===r)return[e,i];t=e+o,n=i}}(n,""),e=t[0];if(""!==e)return[e,t[1]];throw{RE_EXN_ID:fn,msg:"Label should not be empty!",Error:new Error}}function ln(r,n){var t=function(n,t){for(;;){var u=n;if(u){var i=u.hd;if(" "===i){n=u.tl;continue}if(i===r){if(0!==t.length)throw{RE_EXN_ID:fn,msg:"comma-separated list item must not be empty!",Error:new Error};return[t,u.tl]}if('"'===i){var o=cn('"',u.tl);return e(o[1],N(t,[o[0]]))}var a=u.tl;if(a&&"_"===a.hd){var f=a.tl;if(f){var c=f.hd;if(Br.includes(i)&&qr.includes(c))return e(f.tl,N(t,[i+"_"+c]))}}if(Br.includes(i))return e(a,N(t,[i]));throw{RE_EXN_ID:fn,msg:"Unable to interpret '"+i+"'.",Error:new Error}}throw{RE_EXN_ID:fn,msg:"Closing '"+r+"' is missing!",Error:new Error}}},e=function(n,e){for(;;){var u=n;if(u){var i=u.hd;switch(i){case" ":n=u.tl;continue;case",":return t(u.tl,e);default:if(i===r)return[e,u.tl]}}throw{RE_EXN_ID:fn,msg:"Expected ',' or '"+r+"'.",Error:new Error}}};return t(n,[])}function sn(r,n){var t=function(n){return B.fromInt(r,n)},e=function(r,n){for(;;){var e=n,u=r;if(!u)return[e,u];switch(u.hd){case" ":r=u.tl;continue;case"0":n=N(e,[t(0)]),r=u.tl;continue;case"1":n=N(e,[t(1)]),r=u.tl;continue;case"2":n=N(e,[t(2)]),r=u.tl;continue;case"3":n=N(e,[t(3)]),r=u.tl;continue;default:return[e,u]}}}(n,[]),u=sr(e[0]);if(void 0!==u)return[u,e[1]];throw{RE_EXN_ID:fn,msg:"Invalid formDNA!",Error:new Error}}function dn(r){for(;;){var n=r;if(!n)return 0;var t=n.hd,e=0,u=0;switch(t){case" ":r=n.tl;continue;case"(":return{hd:{TAG:0,_0:0},tl:dn(n.tl)};case")":return{hd:{TAG:0,_0:1},tl:dn(n.tl)};case":":var i=n.tl;if(i){if(":"===i.hd){var o=sn(!0,i.tl);return{hd:{TAG:7,sortNMUI:!0,code:o[0]},tl:dn(o[1])}}u=2}else u=2;break;case"I":return{hd:{TAG:2,_0:2},tl:dn(n.tl)};case"M":return{hd:{TAG:2,_0:3},tl:dn(n.tl)};case"N":return{hd:{TAG:2,_0:0},tl:dn(n.tl)};case"U":return{hd:{TAG:2,_0:1},tl:dn(n.tl)};case"{":return{hd:{TAG:1,_0:0},tl:dn(n.tl)};case"}":return{hd:{TAG:1,_0:1},tl:dn(n.tl)};default:u=2}if(2===u){if("⁘"===t){var a=sn(!1,n.tl);return{hd:{TAG:7,sortNMUI:!1,code:a[0]},tl:dn(a[1])}}switch(t){case'"':var f=cn('"',n.tl);return{hd:{TAG:3,_0:f[0]},tl:dn(f[1])};case",":return{hd:1,tl:dn(n.tl)};case".":var c=n.tl;if(!c)return{hd:4,tl:dn(c)};if("."!==c.hd)return{hd:4,tl:dn(c)};var l=c.tl;if(!l)return{hd:4,tl:dn(c)};if("@"!==l.hd)return{hd:4,tl:dn(c)};var s=l.tl;if(!s)return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:0}},tl:dn(s)};switch(s.hd){case".":var d=s.tl;return d&&"_"===d.hd?{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!0,interpr:0}},tl:dn(d.tl)}:{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!1,interpr:0}},tl:dn(d)};case"_":return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!0,interpr:0}},tl:dn(s.tl)};case"~":var v=s.tl;if(!v)return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:1}},tl:dn(v)};switch(v.hd){case".":var h=v.tl;return h&&"_"===h.hd?{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!0,interpr:1}},tl:dn(h.tl)}:{hd:{TAG:5,_0:{reEntryPar:1,unmarked:!1,interpr:1}},tl:dn(h)};case"_":return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!0,interpr:1}},tl:dn(v.tl)};default:return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:1}},tl:dn(v)}}default:return{hd:{TAG:5,_0:{reEntryPar:0,unmarked:!1,interpr:0}},tl:dn(s)}}case"/":var _=cn("/",n.tl);return{hd:{TAG:4,_0:_[0]},tl:dn(_[1])};case"2":var E=n.tl;if(E){if("r"===E.hd){var A=E.tl;if(!A)return{hd:{TAG:6,_0:0},tl:dn(A)};if("+"!==A.hd)return{hd:{TAG:6,_0:0},tl:dn(A)};var m=A.tl;return m&&"1"===m.hd?{hd:{TAG:6,_0:1},tl:dn(m.tl)}:{hd:{TAG:6,_0:0},tl:dn(A)}}e=1}else e=1;break;case"@":var T=n.tl;if(!T)return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:0}},tl:dn(T)};switch(T.hd){case"_":return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!0,interpr:0}},tl:dn(T.tl)};case"~":var w=T.tl;return w&&"_"===w.hd?{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!0,interpr:1}},tl:dn(w.tl)}:{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:1}},tl:dn(w)};default:return{hd:{TAG:5,_0:{reEntryPar:2,unmarked:!1,interpr:0}},tl:dn(T)}}case"[":var p=ln("]",n.tl);return{hd:{TAG:8,_0:p[0]},tl:dn(p[1])};case"a":var G=n.tl;if(G&&"l"===G.hd){var g=G.tl;if(g){if("t"===g.hd)return{hd:3,tl:dn(g.tl)};e=1}else e=1}else e=1;break;case"o":var N=n.tl;if(N&&"p"===N.hd){var y=N.tl;if(y&&"e"===y.hd){var R=y.tl;if(R){if("n"===R.hd)return{hd:2,tl:dn(R.tl)};e=1}else e=1}else e=1}else e=1;break;case"|":return{hd:0,tl:dn(n.tl)};default:e=1}}if(1===e){var I=n.tl,k=0;if(I&&"_"===I.hd){var P=I.tl;if(P){var M=P.hd;if(Br.includes(t)&&qr.includes(M))return{hd:{TAG:3,_0:t+"_"+M},tl:dn(P.tl)};k=2}else k=2}else k=2;if(2===k){if(Br.includes(t))return{hd:{TAG:3,_0:t},tl:dn(I)};throw{RE_EXN_ID:fn,msg:"Unable to interpret '"+t+"'.",Error:new Error}}}}}function vn(r){return dn(b(r.split("")))}var hn=nr("Formula-Formform.Parser.ParseError");function _n(r){if(r){var n=r.hd;if("number"==typeof n)switch(n){case 2:var t=r.tl;if(t&&0===t.hd){var e=t.tl,u=0;if(e){var i=e.hd;if("number"==typeof i)if(3===i){var o=e.tl;if(o&&0===o.hd){var a=o.tl,f=0;if(a){var c=a.hd;if("number"==typeof c||6!==c.TAG)f=3;else{var l=a.tl;if(l){if(0===l.hd)return[{reEntryPar:c._0,unmarked:!0,interpr:1},l.tl];f=3}else f=3}}else f=3;if(3===f)return[{reEntryPar:2,unmarked:!0,interpr:1},a]}else u=2}else u=2;else if(6===i.TAG){var s=e.tl;if(s&&0===s.hd){var d=s.tl,v=i._0,h=0;if(d&&3===d.hd){var _=d.tl;if(_){if(0===_.hd)return[{reEntryPar:v,unmarked:!0,interpr:1},_.tl];h=3}else h=3}else h=3;if(3===h)return[{reEntryPar:v,unmarked:!0,interpr:0},d]}else u=2}else u=2}else u=2;if(2===u)return[{reEntryPar:2,unmarked:!0,interpr:0},e]}break;case 3:var E=r.tl;if(E&&0===E.hd){var A=E.tl,m=0;if(A){var T=A.hd;if("number"==typeof T)if(2===T){var w=A.tl;if(w&&0===w.hd){var p=w.tl,G=0;if(p){var g=p.hd;if("number"==typeof g||6!==g.TAG)G=3;else{var N=p.tl;if(N){if(0===N.hd)return[{reEntryPar:g._0,unmarked:!0,interpr:1},N.tl];G=3}else G=3}}else G=3;if(3===G)return[{reEntryPar:2,unmarked:!0,interpr:1},p]}else m=2}else m=2;else if(6===T.TAG){var y=A.tl;if(y&&0===y.hd){var R=y.tl,I=T._0,k=0;if(R&&2===R.hd){var P=R.tl;if(P){if(0===P.hd)return[{reEntryPar:I,unmarked:!0,interpr:1},P.tl];k=3}else k=3}else k=3;if(3===k)return[{reEntryPar:I,unmarked:!1,interpr:1},R]}else m=2}else m=2}else m=2;if(2===m)return[{reEntryPar:2,unmarked:!1,interpr:1},A]}}else switch(0|n.TAG){case 5:return[n._0,r.tl];case 6:var M=r.tl;if(M&&0===M.hd){var b=M.tl,S=n._0,D=0;if(b){var V=b.hd;if("number"==typeof V&&V>=2)switch(V){case 2:var L=b.tl;if(L&&0===L.hd){var O=L.tl,X=0;if(O&&3===O.hd){var F=O.tl;if(F){if(0===F.hd)return[{reEntryPar:S,unmarked:!0,interpr:1},F.tl];X=3}else X=3}else X=3;if(3===X)return[{reEntryPar:S,unmarked:!0,interpr:0},O]}else D=2;break;case 3:var x=b.tl;if(x&&0===x.hd){var j=x.tl,B=0;if(j&&2===j.hd){var q=j.tl;if(q){if(0===q.hd)return[{reEntryPar:S,unmarked:!0,interpr:1},q.tl];B=3}else B=3}else B=3;if(3===B)return[{reEntryPar:S,unmarked:!1,interpr:1},j]}else D=2;break;case 4:D=2}else D=2}else D=2;if(2===D)return[{reEntryPar:S,unmarked:!1,interpr:0},b]}}}return[{reEntryPar:2,unmarked:!1,interpr:0},r]}function En(r,n,t,e){for(;;){var u=e,i=t,o=void 0!==r&&r,a=void 0!==n&&n;if(i){var f=i.hd;if("number"==typeof f)switch(f){case 1:if(a)return[u,i];break;case 4:var c=i.tl;if(c){var l=c.hd;if("number"!=typeof l&&8===l.TAG){var s=c.tl;if(s){var d=s.hd;if("number"!=typeof d&&7===d.TAG){e=[{TAG:5,_0:{dna:d.code,form:u,vars:l._0}}],t=s.tl,n=a,r=o;continue}}}}}else switch(0|f.TAG){case 0:if(!f._0){var v=En(void 0,void 0,i.tl,[]);e=N(u,[{TAG:0,_0:v[0]}]),t=v[1],n=a,r=o;continue}if(!o)return[u,i.tl];if(o)throw{RE_EXN_ID:hn,msg:"Missing '(' to open FORM.",Error:new Error};break;case 1:if(!f._0){var h=_n(i.tl),_=An(h[1],0);e=N(u,[{TAG:2,_0:h[0],_1:_[0]}]),t=_[1],n=a,r=o;continue}if(a)return[u,i];if(!a)throw{RE_EXN_ID:hn,msg:"Missing '{' to open re-entry FORM.",Error:new Error};break;case 2:e=N(u,[{TAG:1,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 3:e=N(u,[{TAG:4,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 4:e=N(u,[{TAG:3,_0:f._0}]),t=i.tl,n=a,r=o;continue;case 7:e=N(u,[{TAG:5,_0:{dna:f.code,form:void 0,vars:void 0}}]),t=i.tl,n=a,r=o;continue;case 8:var E=i.tl;if(E){var A=E.hd;if("number"!=typeof A&&7===A.TAG){e=N(u,[{TAG:5,_0:{dna:A.code,form:void 0,vars:f._0}}]),t=E.tl,n=a,r=o;continue}}}throw{RE_EXN_ID:hn,msg:"Invalid token '"+on(f)+"'!",Error:new Error}}if(o)return[u,0];throw{RE_EXN_ID:hn,msg:"Missing ')' to close FORM.",Error:new Error}}}function An(r,n){for(;;){var t=n;if(r){var e=En(!0,!0,r,[]),u=e[1],i=e[0];if(u){var o=u.hd;if("number"==typeof o){if(1===o){var a=u.tl;if(a){var f=a.hd;if("number"!=typeof f&&1===f.TAG&&f._0)return[{hd:[],tl:{hd:i,tl:t}},a.tl]}n={hd:i,tl:t},r=a;continue}throw{RE_EXN_ID:hn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}if(1===o.TAG){if(o._0)return[{hd:i,tl:t},u.tl];throw{RE_EXN_ID:hn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:hn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:hn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}throw{RE_EXN_ID:hn,msg:"Missing '}' to close re-entry FORM.",Error:new Error}}}function mn(r){var n=En(!0,void 0,r,[]);if(M(n[1])>0)throw{RE_EXN_ID:hn,msg:"Broken parse tree!",Error:new Error};return n[0]}function Tn(r){return mn(vn(r))}var wn={LexError:fn,scan:vn},pn={ParseError:hn,parse:mn};function Gn(r){for(var n={},t=r.length,e=0;e<t;++e){var u=r[e];n[u[0]]=u[1]}return n}var gn=2147483647,Nn=-2147483648;function yn(r){return r>gn?gn:r<Nn?Nn:Math.floor(r)}function Rn(r){return y(r,(function(r){return B.showAsKey(r)})).join("")}function In(r,n){var t=void 0!==r&&r,e=n.split("").map((function(r){var n=function(r){var n=parseInt(r,10);return isNaN(n)?void 0:n}(r);return void 0!==n?B.fromInt(t,n):B.tFromStr(r)}));if(e.every((function(r){return void 0!==r})))return e.map((function(r){return r}))}var kn={show:function(r){return"["+y(r,(function(r){return B.show(r)})).join(",")+"]"},showAsKey:Rn,tFromStr:In};function Pn(r,n){var t=void 0!==r&&r;return{points:G(yn(Math.pow(4,n)),(function(r){var e,u,i=(e=r.toString(4),u=n,"0",e.padStart(u,"0")),o=In(t,i);if(void 0!==o)return o;throw{RE_EXN_ID:"Not_found",Error:new Error}})),dim:n}}var Mn={getPoints:function(r){return r.points},getDimension:function(r){return r.dim},make:Pn,toDNA:function(r,n){return dr(r.points.map(h(n)).reverse())}};function bn(r,n){var t=r.dim,e=function(r,u){return u>=t?{TAG:0,_0:v(n,s(r,0))}:{TAG:1,_0:y(B.tEnum(void 0,void 0),(function(n){var t=function(r,n){for(var t=r.length,e=0,u=0,i=new Array(t),o=new Array(t),a=0;a<t;++a){var f=r[a];n(f)?(i[e]=f,e=e+1|0):(o[u]=f,u=u+1|0)}return i.length=e,o.length=u,[i,o]}(r,h((function(r){return s(r,u)===n})));return[n,e(t[0],u+1|0)]}))}};return e(r.points,0)}var Sn={show:function r(n,t){var e=void 0!==n?n:0;if(0===t.TAG)return"<"+B.show(t._0)+">";var u=t._0,i=p(u,0),o=void 0!==i&&0===i[1].TAG,a=o?"":"\n",f=o?"":"  ";return"["+a+y(u,(function(n){return f.repeat(e+1|0)+(B.show(n[0])+": ")+r(e+1|0,n[1])})).join(", "+a)+a+f.repeat(e)+"]"},makeUnsafe_Cell:function(r){return{TAG:0,_0:r}},makeUnsafe_Map:function(r){return{TAG:1,_0:r}},make:bn,fromDNA:function(r){var n=r,t=Pn(void 0,yn(Math.log(n.length)/Math.log(4)));return bn(t,(function(n){var e,u=t.dim-1|0,i=(fr(r)-1|0)-(u<0?0:function(r,n,t){for(var e=0,u=0,i=r.length;u<i;++u)e=t(e,r[u],u);return e}(n,0,3===(e=function(r,n,t){var e=0|Math.pow(4,u-t|0);return r+Math.imul(e,B.toInt(void 0,n))|0}).length?e:function(r,n,t){return function(r,n,t,e){var u=r.length;if(3===u)return r(n,t,e);switch(u){case 1:return d(r(n),[t,e]);case 2:return d(r(n,t),[e]);case 3:return r(n,t,e);case 4:return function(u){return r(n,t,e,u)};case 5:return function(u,i){return r(n,t,e,u,i)};case 6:return function(u,i,o){return r(n,t,e,u,i,o)};case 7:return function(u,i,o,a){return r(n,t,e,u,i,o,a)};default:return d(r,[n,t,e])}}(e,r,n,t)}))|0,o=ar(r,i);if(void 0!==o)return o;throw{RE_EXN_ID:"Not_found",Error:new Error}}))}},Dn={show:function(r){return""},makeFromDNA:function(r){var n=r;return Gn(g(Pn(void 0,yn(Math.log(n.length)/Math.log(4))).points,n.reverse(),(function(r,n){return[Rn(r),n]})))}};function Vn(r){return{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}}]}}function Ln(r){return{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}}]}}function On(r){return{TAG:0,_0:[{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:4,_0:r}]},{TAG:0,_0:[{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:0,_0:[{TAG:4,_0:r}]}]}]}}function Xn(r){return{TAG:0,_0:[{TAG:0,_0:[{TAG:2,_0:{reEntryPar:2,unmarked:!1,interpr:0},_1:{hd:[{TAG:4,_0:r}],tl:0}},{TAG:0,_0:[{TAG:4,_0:r}]}]},{TAG:0,_0:[{TAG:2,_0:{reEntryPar:0,unmarked:!1,interpr:0},_1:{hd:[{TAG:0,_0:[{TAG:4,_0:r}]}],tl:0}},{TAG:4,_0:r}]}]}}function Fn(r,n){switch(r){case 0:return Vn(n);case 1:return On(n);case 2:return Xn(n);case 3:return Ln(n)}}var xn={n:Vn,m:Ln,u:On,i:Xn,get:Fn,fromVPoint:function(r,n){var t=void 0!==r?r:or;if(t.length<n.length)throw function(r){throw new RangeError("Insufficient variables in given list!")}();return{TAG:0,_0:R(n,(function(r,n){return{TAG:0,_0:[Fn(n,s(t,r))]}}))}}},jn={Imply:{apply:function(r,n){var t=v(n,r);return void 0!==t?t:r}},Equiv:{applyL:function(r,n){var t=v(n[0],r);return void 0!==t?t:r},applyR:function(r,n){var t=v(n[1],r);return void 0!==t?t:r}}},Bn={refl:[function(r){return[{TAG:0,_0:[{TAG:0,_0:r}]}]},function(r){if(1===r.length){var n=r[0];if(0===n.TAG){var t=n._0;if(1===t.length){var e=t[0];return 0===e.TAG?e._0:void 0}}}}]};function qn(r,n){if(r.length===n.length)return A(Gn(R(r,(function(r,t){return[n[r],t]}))))}function Un(r,n){return r.map((function(r){switch(0|r.TAG){case 0:return{TAG:0,_0:Un(r._0,n)};case 1:return{TAG:1,_0:r._0};case 2:return{TAG:2,_0:r._0,_1:Kn(r._1,n)};case 3:return{TAG:3,_0:r._0};case 4:var t=function(r,n){if(n in r)return A(r[n])}(n,r._0);if(void 0!==t)return{TAG:1,_0:t};throw{RE_EXN_ID:"Not_found",Error:new Error};case 5:return{TAG:5,_0:Cn(r._0,n)}}}))}function Cn(r,n){var t=r.form,e=void 0!==t?Un(t,n):void 0;return{dna:r.dna,form:e,vars:void 0}}function Kn(r,n){return P(r,(function(r){return Un(r,n)}))}function Jn(r){return r.reduce((function(r,n){return B.rel(r,function(r){switch(0|r.TAG){case 0:var n=r._0;return 0!==n.length?B.inv(Jn(n)):3;case 1:return r._0;case 2:return br(r._0,{NAME:"NestToR",VAL:P(r._1,Jn)});case 3:return 1;case 5:return 0}}(n))}),0)}function zn(r){if(!r)return 3;var n=r.tl,t=r.hd;return n?B.inv(B.rel(Jn(t),zn(n))):B.inv(Jn(t))}function $n(r,n){return Jn(Un(r,n))}function Hn(r){var n=en.getVars(r),t=n.length,e=Mn.make(void 0,t);return{dna:dr(Mn.getPoints(e).map((function(t){var e=qn(t,n);if(void 0!==e)return Jn(Un(r,function(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var n=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===n?void 0:{BS_PRIVATE_NESTED_SOME_NONE:n-1|0}}(e)));throw{RE_EXN_ID:"Not_found",Error:new Error}})).reverse()),form:r,vars:n}}var Qn={toVPoint:function(r){for(var n=Object.keys(r),t=n.length,e=new Array(t),u=0;u<t;++u)e[u]=r[n[u]];return e},fromVPoint:qn,interpret:Un},Wn=Jn,Yn={Calc:t,DNA:e,SeqRE:u,Expr:i,Formula:o,Value:a,Alg:f,Eval:c};return n.default}()}));
//# sourceMappingURL=formformRAW.min.js.map